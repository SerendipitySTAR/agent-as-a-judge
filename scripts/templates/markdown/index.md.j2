{# Main Documentation Template #}
{% if documentation.document_title %}
# {{ documentation.document_title }}
{% else %}
# {{ documentation.repo_name }} Documentation
{% endif %}

Generated at: {{ generated_at }}

---
{% for section_data in documentation.section_render_order %}
{% if documentation[section_data.id] and documentation[section_data.id].enabled %}
## {{ section_data.title }}

{# Render main content for the section if it exists #}
{% if documentation[section_data.id].content %}
{{ documentation[section_data.id].content | safe }}
{% endif %}

{# Specialized rendering based on section type or ID #}
{% if section_data.type == 'overview' or section_data.id == 'overview' %}
{% if documentation.use_cases %}
### Use Cases
{{ documentation.use_cases }}
{% endif %}
{% if documentation.benchmark_table %}
### Benchmarks
| Benchmark/Task | Description | Agent Types/Configuration |
|----------------|-------------|---------------------------|
{% for benchmark in documentation.benchmark_table %}
| {{ benchmark.benchmark }} | {{ benchmark.description }} | {{ benchmark.agent_types }} |
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'architecture' or section_data.id == 'architecture' %}
{% if documentation[section_data.id].architectural_philosophy %}
### Architectural Philosophy & Design Principles
{{ documentation[section_data.id].architectural_philosophy | safe }}
{% endif %}
{% if documentation[section_data.id].numbered_concepts %}
### Key Architectural Concepts
{% for concept in documentation[section_data.id].numbered_concepts %}
- **{{ concept.title }}**: {{ concept.description }}
{% endfor %}
{% endif %}
{% if documentation[section_data.id].architecture_sections %}
### Architecture Sections
{% for arch_section in documentation[section_data.id].architecture_sections %}
#### {{ arch_section.title }}
{{ arch_section.content | safe }}
{% endfor %}
{% endif %}
{% if documentation[section_data.id].architecture_files %}
### Relevant Architecture Files
{% for file_path in documentation[section_data.id].architecture_files %}
- `{{ file_path }}`
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'diagrams' or section_data.id == 'diagrams' %}
{% if documentation.flow_diagrams.architecture and documentation.flow_diagrams.architecture.mermaid_code %}
### System Architecture Diagram
```mermaid
{{ documentation.flow_diagrams.architecture.mermaid_code | safe }}
```
{% if documentation.flow_diagrams.architecture.description %}
*Description: {{ documentation.flow_diagrams.architecture.description }}*
{% endif %}
{% endif %}
{% if documentation.flow_diagrams.workflow and documentation.flow_diagrams.workflow.mermaid_code %}
### Workflow Diagram
```mermaid
{{ documentation.flow_diagrams.workflow.mermaid_code | safe }}
```
{% if documentation.flow_diagrams.workflow.description %}
*Description: {{ documentation.flow_diagrams.workflow.description }}*
{% endif %}
{% endif %}
{% if documentation.flow_diagrams.component_relationships and documentation.flow_diagrams.component_relationships.mermaid_code %}
### Component Relationship Diagram
```mermaid
{{ documentation.flow_diagrams.component_relationships.mermaid_code | safe }}
```
{% if documentation.flow_diagrams.component_relationships.description %}
*Description: {{ documentation.flow_diagrams.component_relationships.description }}*
{% endif %}
{% endif %}
{% endif %}

{% if section_data.type == 'component_analysis' or section_data.id == 'component_analysis' %}
{% if documentation.component_table %}
### Components Overview
| Component/Parameter | Description |
|---------------------|-------------|
{% for item in documentation.component_table %}
| `{{ item.name }}`      | {{ item.description | default('N/A') }} |
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'components' or section_data.id == 'components' %}
{% if documentation.components %}
{% for component_name, component_data in documentation.components.items() %}
### Component: {{ component_name }}

**Purpose:** 
{{ component_data.purpose | default('Not specified.') }}

{% if component_data.usage %}
**Usage:** 
{{ component_data.usage | safe }}
{% endif %}

{% if component_data.methods_with_descriptions %}
**Key Methods:**
{% for method in component_data.methods_with_descriptions %}
- `{{ method.name }}`: {{ method.description | default('No description provided.') }}
{% endfor %}
{% endif %}

{% if component_data.parameters %}
**Parameters:**
| Parameter   | Default Value / Values | Notes |
|-------------|------------------------|-------|
{% for param in component_data.parameters %}
| `{{ param.name }}` | `{{ param.values | default('N/A') }}` | {{ param.notes | default('N/A') }} |
{% endfor %}
{% endif %}

{% if component_data.code_example %}
**Example:**
```python
{{ component_data.code_example }}
```
{% endif %}

{% if component_data.source_files %}
**Source Files:**
{% for source_file_info in component_data.source_files %}
- `{{ source_file_info.file }}`{% if source_file_info.lines %} (Lines: {{ source_file_info.lines }}){% endif %}
{% endfor %}
{% endif %}
---
{% endfor %}
{% else %}
No detailed component information available for this section.
{% endif %}
{% endif %}

{% if section_data.type == 'usage' or section_data.id == 'usage' %}
{# Main content is already rendered above. Specific fields for usage: #}
{% if documentation.getting_started %}
### Getting Started
{{ documentation.getting_started | safe }}
{% endif %}
{% if documentation.basic_example %}
**Basic Example:**
```python
{{ documentation.basic_example }}
```
{% endif %}
{% if documentation.usage_features %}
**Key Usage Features:**
{% for feature in documentation.usage_features %}
- {{ feature }}
{% endfor %}
{% endif %}
{# documentation.advanced_usage is usually the main content of the 'usage' section, already rendered #}
{% endif %}

{% if section_data.type == 'installation' or section_data.id == 'installation' %}
{# Main content (documentation[section_data.id].content which is documentation.installation) is already rendered #}
{% if documentation.parameters %}
### Global Parameters/Configuration
| Parameter Name | Typical Values / Default | Notes |
|----------------|--------------------------|-------|
{% for param in documentation.parameters %}
| `{{ param.name }}` | `{{ param.values | default('N/A') }}` | {{ param.notes | default('N/A') }} |
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'advanced_topics' or section_data.id == 'advanced_topics' %}
{# Main content (documentation[section_data.id].content which is documentation.advanced_topics) is already rendered #}
{% if documentation[section_data.id].advanced_topics_sections %}
{% for adv_section in documentation[section_data.id].advanced_topics_sections %}
### {{ adv_section.title }}
{{ adv_section.content | safe }}
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'examples' or section_data.id == 'examples' %}
{# Main content (documentation[section_data.id].content which is documentation.examples) is already rendered #}
{% if documentation.code_examples %}
{% for example in documentation.code_examples %}
{% if example.title and "Example from " + section_data.title in example.description %} {# Crude filter to show only examples for this section if description is set up this way #}
### {{ example.title | default('Example') }}
{% if example.description %}
{{ example.description }}
{% endif %}
```python
{{ example.code }}
```
{% elif not example.description or "Example from" not in example.description %} {# Show general examples not tied to a specific section description #}
### {{ example.title | default('Example') }}
{% if example.description %}
{{ example.description }}
{% endif %}
```python
{{ example.code }}
```
{% endif %}
{% endfor %}
{% endif %}
{% endif %}

{% if section_data.type == 'code_quality' or section_data.id == 'code_quality' %}
{% if documentation.code_quality_assessments %}
{% for assessment_item in documentation.code_quality_assessments %}
### Assessment for: `{{ assessment_item.file_path }}`

{{ assessment_item.assessment | safe }}
---
{% endfor %}
{% else %}
No code quality assessments available.
{% endif %}
{% endif %}

---
{% endif %}
{% endfor %}

{% if documentation.sources %}
## Source Information
This documentation was generated based on information from various sources within the repository.
Key source references include:
{% for section_name, source_list in documentation.sources.items() %}
{% if source_list %}
**{{ section_name | capitalize }}:**
{% for source in source_list %}
- `{{ source.file }}`{% if source.lines %} (Lines: {{ source.lines }}){% endif %}
{% endfor %}
{% endif %}
{% endfor %}
{% endif %}

---
*Documentation generated on: {{ generated_at }}*
