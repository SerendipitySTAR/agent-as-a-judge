<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>shandu Documentation</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked@9.1.5/marked.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/json.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        docusaurus: {
                            50: '#FFF9EB',
                            100: '#FFF3D6',
                            200: '#FFE7AD',
                            300: '#FFDB85',
                            400: '#FFD05C',
                            500: '#FFCB45',
                            600: '#E6B53E',
                            700: '#CC9F36',
                            800: '#B38A2F',
                            900: '#997427',
                        },
                        sidebar: {
                            bg: '#F9F9F9',
                            hover: '#F2F2F2',
                            active: '#FFFBF2',
                        },
                        text: {
                            primary: '#606770',
                            secondary: '#8B949E',
                            heading: '#444950',
                            link: '#3578e5',
                        },
                        code: {
                            bg: '#F6F8FA',
                            text: '#6B7280',
                        },
                        border: '#E5E7EB',
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        mono: ['SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace'],
                    },
                },
            },
        }
    </script>
    <style>
        body {
            background-color: #FFFDF6;
            font-size: 13px;
        }

        main {
            max-width: 1000px;
            padding: 1.5rem 2rem;
        }
        
        .code-block-container {
            margin: 1rem 0;
            border-radius: 6px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            max-width: 100%;
        }
        
        .code-block-title {
            display: flex;
            padding: 8px 15px;
            background-color: #e9ecef;
            border-bottom: 1px solid #dee2e6;
            font-family: 'SF Mono', 'Roboto Mono', monospace;
            font-size: 0.85rem;
            color: #495057;
        }
        
        .standalone-code-block {
            font-family: 'SF Mono', 'Roboto Mono', monospace;
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 15px;
            overflow-x: auto;
            margin: 1rem 0;
            font-size: 0.9rem;
            line-height: 1.5;
            position: relative;
        }
        
        .code-language {
            position: absolute;
            top: 0;
            right: 0;
            background-color: #e9ecef;
            padding: 2px 8px;
            font-size: 0.7rem;
            border-bottom-left-radius: 4px;
            text-transform: uppercase;
            color: #495057;
        }
        
        .copy-button {
            padding: 0.2rem 0.5rem;
            background: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 0.7rem;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .copy-button:hover {
            background: #dee2e6;
        }
        
        .code-block-container pre {
            margin: 0;
            padding: 15px;
            overflow-x: auto;
            font-size: 0.9rem;
            line-height: 1.5;
            background-color: #f8f9fa;
        }
        
        .code-block-container pre::before {
            display: none;
        }
        
        .code-block-container code {
            font-family: 'SF Mono', 'Roboto Mono', monospace;
            font-size: 0.9rem;
            padding: 0.1rem 0.3rem;
            background-color: #f1f3f5;
            border-radius: 3px;
        }
        
        .step-number {
            display: inline-block;
            width: 1.8rem;
            height: 1.8rem;
            background-color: #495057;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 1.8rem;
            margin-right: 0.5rem;
            font-weight: 600;
        }
        
        .deployment-steps {
            margin: 1.5rem 0;
        }
        
        .deployment-step {
            margin-bottom: 1.5rem;
        }
        
        .deployment-step-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            display: flex;
            align-items: center;
        }

        .component-card {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            margin-bottom: 1.25rem;
            background-color: white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        
        .component-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background-color: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
        }
        
        .component-header h3 {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: #4b5563;
        }
        
        .component-body {
            padding: 1rem;
        }
        
        .component-section {
            margin-bottom: 0.75rem;
        }
        
        .component-section:last-child {
            margin-bottom: 0;
        }
        
        .section-title {
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: #4b5563;
            font-size: 0.9rem;
        }
        
        .section-content {
            color: #6b7280;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .compact-table {
            width: 100%;
            margin: 0.5rem 0;
            font-size: 0.8rem;
        }
        
        .compact-table th {
            padding: 0.5rem 0.75rem;
            text-align: left;
            background-color: #f9fafb;
        }
        
        .compact-table td {
            padding: 0.5rem 0.75rem;
            border-bottom: 1px solid #f3f4f6;
        }
        
        .two-column-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }

        ::-webkit-scrollbar {
            width: 5px;
            height: 5px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #b8bcbf;
        }

        .mermaid {
            padding: 1.5rem;
            background-color: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            margin: 1.5rem 0;
        }
        
        .mermaid-container {
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 1.5rem 0;
            background-color: white;
        }
        
        .mermaid-header {
            padding: 0.75rem 1rem;
            background-color: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            font-weight: 600;
            color: #4b5563;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .mermaid-body {
            padding: 1rem;
        }
        
        .mermaid-diagram {
            background-color: #fafafa;
            border-radius: 6px;
            padding: 1rem;
            overflow-x: auto;
        }
        
        .flow-steps {
            margin: 2rem 0;
        }
        
        .flow-step {
            display: flex;
            margin-bottom: 1.5rem;
            position: relative;
        }
        
        .flow-step:not(:last-child):after {
            content: '';
            position: absolute;
            top: 1.8rem;
            left: 0.9rem;
            height: calc(100% + 0.75rem);
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
        
        .flow-step-number {
            flex-shrink: 0;
            width: 1.8rem;
            height: 1.8rem;
            border-radius: 50%;
            background-color: #ffcb45;
            color: #fff;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            position: relative;
            z-index: 1;
        }
        
        .flow-step-content {
            flex-grow: 1;
            padding-bottom: 0.5rem;
        }
        
        .flow-step-title {
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .flow-step-description {
            color: #6b7280;
            margin-bottom: 0.75rem;
        }

        pre {
            background-color: #282c34;
            border-radius: 6px;
            margin: 1rem 0;
            padding: 0;
            overflow-x: auto;
            border: 1px solid #383c44;
            position: relative;
        }

        pre code {
            font-family: 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace';
            font-size: 0.8125rem;
            line-height: 1.6;
            padding: 1rem !important;
            border-radius: 6px;
            display: block;
            overflow-x: auto;
            color: #abb2bf;
        }

        pre::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, #ffcb45, #ffe7ad);
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            z-index: 10;
        }

        pre::after {
            content: attr(data-language);
            position: absolute;
            top: 0;
            right: 0;
            color: #8b949e;
            font-size: 0.7rem;
            font-weight: 600;
            padding: 0.25rem 0.75rem;
            text-transform: uppercase;
            border-radius: 0 6px 0 6px;
            background-color: rgba(255, 255, 255, 0.7);
            z-index: 5;
        }

        code:not(pre code) {
            background-color: rgba(255, 203, 69, 0.1);
            border-radius: 3px;
            font-family: 'SFMono-Regular', 'Menlo', 'Monaco', 'Consolas', 'monospace';
            font-size: 85%;
            padding: 0.2em 0.4em;
            color: #d97706;
        }

        table {
            width: 100%;
            margin: 1rem 0;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 0.5rem;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
            font-size: 0.8125rem;
        }

        th {
            background-color: #f9fafb;
            color: #374151;
            font-weight: 600;
            text-align: left;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        td {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #e5e7eb;
            color: #4b5563;
        }

        tr:last-child td {
            border-bottom: none;
        }

        tr:nth-child(even) {
            background-color: #f9fafb;
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .collapsible.expanded .collapsible-content {
            max-height: 1000px;
        }

        .collapsible-icon {
            transition: transform 0.3s ease;
        }

        .collapsible.expanded .collapsible-icon {
            transform: rotate(90deg);
        }
        
        .markdown-content h1 {
            font-size: 1.75rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 1rem;
            color: #374151;
        }
        
        .markdown-content h2 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
            color: #374151;
        }
        
        .markdown-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.25rem;
            margin-bottom: 0.75rem;
            color: #374151;
        }
        
        .markdown-content p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .markdown-content ul, .markdown-content ol {
            margin-left: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .markdown-content li {
            margin-bottom: 0.25rem;
        }
        
        .markdown-content a {
            color: #3578e5;
            text-decoration: none;
        }
        
        .markdown-content a:hover {
            text-decoration: underline;
        }
        
        .markdown-content blockquote {
            border-left: 4px solid #e5e7eb;
            padding-left: 1rem;
            font-style: italic;
            margin: 1rem 0;
            color: #6b7280;
        }
        
        .source-reference {
            display: inline-flex;
            align-items: center;
            background: #f3f4f6;
            border-radius: 4px;
            padding: 0.25rem 0.5rem;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.75rem;
            color: #4b5563;
            border: 1px solid #e5e7eb;
        }
        
        .source-reference:hover {
            background: #e5e7eb;
        }
        
        .source-icon {
            margin-right: 0.25rem;
            width: 0.875rem;
            height: 0.875rem;
        }
        
        .sidebar-nav-item {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            width: 100%;
        }

        .example-card {
            background-color: white;
            border-radius: 6px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 1.5rem;
            overflow: hidden;
        }
        
        .example-header {
            background-color: #f8f9fa;
            padding: 12px 15px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .example-title {
            margin: 0;
            font-size: 1rem;
            font-weight: 600;
            color: #212529;
        }
        
        .example-body {
            padding: 15px;
        }
        
        .example-description {
            margin-bottom: 15px;
            color: #495057;
        }

        .source-link {
            color: #3578e5;
            text-decoration: none;
            transition: color 0.2s;
        }
        
        .source-link:hover {
            color: #1d4ed8;
            text-decoration: underline;
        }
    </style>
</head>
<body class="font-sans text-text-primary">
    <div class="flex min-h-screen p-4">
        <nav class="w-72 fixed inset-y-4 bg-sidebar-bg shadow-sm border-r border-border overflow-y-auto rounded-lg flex flex-col" style="left: 16px; height: calc(100vh - 32px);">
            <div class="px-4 py-6">
                <div class="text-xl text-text-heading text-center font-bold mb-4">SerendipitySTAR/shandu</div>
                <div class="mt-2 text-xs text-text-secondary text-center">Last indexed: 2025-05-22 15:42:54</div>
            </div>
            
            <ul class="space-y-1 px-2 flex-grow">
                <li>
                    <a href="#overview" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Overview</a>
                </li>
                <li>
                    <a href="#architecture" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Architecture</a>
                    
                </li>
                <li>
                    <a href="#core-components" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Core Components</a>
                    
                    <div class="ml-4 mt-1 space-y-1">
                        
                        <a href="#component-stateless" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Stateless</a>
                        
                        <a href="#component-stateful" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Stateful</a>
                        
                        <a href="#component-**project-infrastructure**" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">**Project Infrastructure**</a>
                        
                        <a href="#component-**data-acquisition-layer**" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">**Data Acquisition Layer**</a>
                        
                        <a href="#component-**agent-system-layer**" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">**Agent System Layer**</a>
                        
                        <a href="#component-**design-patterns-and-techniques**" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">**Design Patterns and Techniques**</a>
                        
                        <a href="#component-**state-analysis**" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">**State Analysis**</a>
                        
                    </div>
                    
                </li>
                <li>
                    <a href="#usage" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Using shandu</a>
                </li>
                <li>
                    <a href="#installation" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Installation & Setup</a>
                </li>
                
                <li>
                    <a href="#parameters" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Parameters</a>
                </li>
                
                
                
                <li>
                    <a href="#advanced-topics" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Advanced Topics</a>
                    
                    <div class="ml-4 mt-1 space-y-1">
                        
                        <a href="#performance-optimization-strategies" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Performance Optimization Strategies</a>
                        
                        <a href="#extending-or-customizing-the-system" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Extending or Customizing the System</a>
                        
                        <a href="#internal-architecture-details" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Internal Architecture Details</a>
                        
                        <a href="#complex-algorithms-and-techniques" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Complex Algorithms and Techniques</a>
                        
                        <a href="#integration-with-other-systems" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Integration with Other Systems</a>
                        
                        <a href="#scaling-considerations" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Scaling Considerations</a>
                        
                        <a href="#security-considerations" class="sidebar-nav-item block py-1 px-3 rounded-md text-xs text-text-secondary hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Security Considerations</a>
                        
                    </div>
                    
                </li>
                
                
                <li>
                    <a href="#examples" class="sidebar-nav-item block py-1.5 px-3 rounded-md text-sm hover:bg-sidebar-hover hover:text-text-heading transition-colors nav-link">Examples & Tutorials</a>
                </li>
                
            </ul>
            
            <div class="px-4 py-6 mt-auto border-t border-gray-200">
                <div class="flex items-center">
                    <img src="https://github.com/metauto-ai/agent-as-a-judge/blob/main/assets/devai_logo.png?raw=true" alt="DevAI Logo" class="h-8 mr-2">
                    <link rel="preconnect" href="https://fonts.googleapis.com">
                    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
                    <link href="https://fonts.googleapis.com/css2?family=Audiowide&family=Russo+One&display=swap" rel="stylesheet">
                    <h1 class="text-lg font-bold text-text-heading mb-1" style="font-family: 'Russo One', sans-serif;">OpenWiki<br><span class="text-sm tracking-wider">by agent-as-a-judge</span></h1>
                </div>
            </div>
        </nav>

        <main class="ml-80 flex-1 px-8 py-6 max-w-5xl bg-white rounded-lg shadow-sm mb-4">
            <div class="mb-12" id="overview">
                <div class="flex items-center justify-between mb-5">
                    <h1 class="text-2xl font-bold text-text-heading">Overview</h1>
                    <a href="https://github.com/SerendipitySTAR/shandu" target="_blank" class="flex items-center gap-2 text-text-link text-xs hover:underline">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor" viewBox="0 0 16 16" class="text-text-link">
                            <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                        </svg>
                        View Repository
                    </a>
                </div>
                
                <div class="flex flex-wrap items-center mb-3 text-xs text-text-secondary">
                    <span class="mr-2">Sources:</span>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                            README.md
                            <span class="ml-1 text-text-secondary">1-100</span>
                        
                    </div>
                    
                </div>

                <div class="markdown-content"># Overview of the Shandu Repository  

## Purpose and Scope  
The project aims to provide an automated research and information-gathering system by combining web scraping, AI-powered search, and modular agent workflows. It focuses on generating structured reports, managing citations, and optimizing search queries through iterative refinement.  

## Core Features  
- **Web Scraping**: Extracts data from websites using the `scraper` module.  
- **AI Search Integration**: Leverages AI models (e.g., Gemini, GPT-4, Mistral) for query generation and result refinement via the `search` and `ai_search` modules.  
- **Agent-Based Workflows**: Implements modular agents (e.g., `langgraph_agent`, `agent_utils`) for task orchestration, including source selection, report generation, and reflection.  
- **Citation Management**: Automates citation handling with `citation_manager`, `citation_registry`, and related utilities.  
- **CLI Interface**: Offers command-line tools for user interaction through `cli.py`.  

## Target Audience/Users  
- Researchers requiring automated data collection and report generation.  
- Developers integrating AI-driven search and scraping into applications.  
- Users of large language models (LLMs) for query optimization and iterative research workflows.  

## Main Technologies or Frameworks  
- **Python** (primary language).  
- **LangGraph** (for agent workflow orchestration in `langgraph_agent.py`).  
- **LLM APIs** (Gemini, GPT-4, Mistral, etc., as shown in example files).  
- **Modular Architecture** (separated into `scraper`, `search`, `agents`, and `utils` directories).  
- **Logging Utilities** (custom logger in `utils/logger.py`).  

*(Note: This summary is inferred from the project structure and file names, as direct access to README.md content was not provided.)*</div>
                
                
                
                
                
                
            </div>

            <div class="mb-12" id="architecture">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Architecture</h1>
                
                <div class="flex flex-wrap items-center mb-3 text-xs text-text-secondary">
                    <span class="mr-2">Sources:</span>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                            README.md
                            
                        
                    </div>
                    
                </div>
                
                <div class="mb-5 border border-border rounded-lg overflow-hidden">
                    <div class="collapsible cursor-pointer px-4 py-2 bg-sidebar-bg flex items-center text-sm">
                        <svg class="collapsible-icon w-3.5 h-3.5 mr-2 text-text-secondary" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M6 8a.5.5 0 0 0 .5.5h5.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L12.293 7.5H6.5A.5.5 0 0 0 6 8z"/>
                        </svg>
                        <span class="font-medium">Relevant source files</span>
                    </div>
                    <div class="collapsible-content px-4 py-2 bg-white">
                        <ul class="space-y-1 text-xs">
                            
                        </ul>
                    </div>
                </div>

                <div class="markdown-content">Architecture Overview  

High-Level Description  
The repository is structured as a modular Python application focused on research automation, combining web scraping, search capabilities, and agent-based workflows. It emphasizes configuration, logging, and integration with external AI models. The system is designed to process information through a series of coordinated components, enabling tasks like query generation, source selection, and report creation.  

Main Components and Roles  
* **CLI (Command Line Interface)**: Provides a user-facing interface to execute research workflows, manage configurations, and interact with the system's core functionalities.  
* **Config**: Centralizes configuration settings for the application, including API keys, model parameters, and workflow defaults.  
* **Prompts**: Stores predefined prompt templates used by agents to generate queries, analyze content, and structure outputs.  
* **Scraper**: Extracts data from web sources, handling tasks like HTML parsing and content retrieval for use in research workflows.  
* **Search**: Implements traditional search logic (e.g., keyword-based) and AI-enhanced search (e.g., semantic or context-aware queries) to locate relevant information.  
* **Researcher**: Coordinates the end-to-end research process, integrating scraping, search, and content processing to produce structured outputs.  
* **Processors**: Specialized modules for tasks like report generation and content analysis, ensuring data is formatted and summarized effectively.  
* **Agent Utils**: Provides helper functions for agent operations, such as input validation, state management, and utility tools for workflow execution.  
* **Citation Manager**: Tracks and formats citations for sources used in research, ensuring proper attribution and reference handling.  
* **Nodes**: Individual steps in the agent workflow (e.g., query generation, source selection, reflection), each performing a specific task in the research pipeline.  
* **Graph Builder**: Constructs the workflow graph by connecting nodes, defining the sequence and logic of agent operations.  
* **Graph Wrapper**: Manages the execution of the workflow graph, handling input routing, state transitions, and output aggregation.  
* **Tests**: Contains unit and integration tests to validate the functionality of core components like report generation and citation management.  
* **Examples**: Demonstrates usage patterns with different AI models (e.g., GPT-4, Gemini) to showcase integration flexibility and workflow customization.  

Data Flow  
1. The CLI accepts user input and loads configurations from the Config module.  
2. Prompts are retrieved and used by agents to generate initial queries or refine search terms.  
3. The Researcher module triggers the workflow, which may involve:  
   a. Nodes like `generate_queries.py` and `source_selection.py` to define search strategies.  
   b. The Search module (traditional or AI-based) to fetch results from web sources.  
   c. The Scraper to extract raw content from URLs identified during search.  
4. Processors (e.g., `report_generator.py`) analyze and structure the scraped or searched data into final outputs.  
5. Citation Manager and Citation Registry track sources, ensuring citations are added during report generation.  
6. The Graph Builder and Wrapper orchestrate the sequence of nodes, passing data between them until the final report is produced.  

External Dependencies and Integrations  
- **LLM APIs**: Integrates with models like GPT-4, Gemini, and Mistral via examples and agent logic, suggesting reliance on OpenAI, Google, and Mistral AI services.  
- **LangGraph**: Used in `langgraph_agent.py` and graph-related modules to manage stateful agent workflows.  
- **Logging**: Leverages the `logger.py` utility for tracking operations and debugging.  
- **Scraping Tools**: Likely depends on libraries like `requests` or `BeautifulSoup` for web scraping tasks.  
- **Search Engines**: May interface with APIs like Google Search or Elasticsearch for traditional and AI-based search.  
- **Python Packages**: Dependencies listed in `requirements.txt` and `MANIFEST.in` (e.g., for testing, packaging, or utility functions).</div>

                

                
                <div class="mermaid-container">
                    <div class="mermaid-header">
                        <span>Architecture Overview</span>
                    </div>
                    <div class="mermaid-body">
                        <div class="mermaid-diagram">
                            <div class="mermaid">
                                graph TD
    A[CLI Interface] --> B[Researcher Module]
    B --> C[Scraper Component]
    B --> D[Search Component]
    D --> E[AI Search Subsystem]
    B --> F[LangGraph Agent]
    F --> G[Query Generation Node]
    F --> H[Citation Management]
    C --> I[Web Scraping Logic]
    D --> J[Search Algorithms]
    E --> K[AI-Powered Search]
    H --> L[Citation Registry]
    H --> M[Citation Manager]
    G --> N[Reflection Node]
    classDef core fill:#f9f,stroke:#333;
    classDef utilities fill:#bbf,stroke:#333;
    class A,B,F core
    class C,D,E,H,I,J,K,L,M,N utilities
                            </div>
                        </div>
                    </div>
                </div>
                
            </div>

            <div class="mb-12" id="core-components">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Core Components</h1>
                
                <div class="flex flex-wrap items-center mb-3 text-xs text-text-secondary">
                    <span class="mr-2">Sources:</span>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/setup.py#L1-L49" target="_blank" class="source-link">
                            setup.py
                            <span class="ml-1 text-text-secondary">1-49</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/config.py#L1-L50" target="_blank" class="source-link">
                            shandu/config.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/utils/logger.py#L1-L50" target="_blank" class="source-link">
                            shandu/utils/logger.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/cli.py#L1-L50" target="_blank" class="source-link">
                            shandu/cli.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/scraper/scraper.py#L1-L50" target="_blank" class="source-link">
                            shandu/scraper/scraper.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/search/search.py#L1-L50" target="_blank" class="source-link">
                            shandu/search/search.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/search/ai_search.py#L14-L63" target="_blank" class="source-link">
                            shandu/search/ai_search.py
                            <span class="ml-1 text-text-secondary">14-63</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/research/researcher.py#L1-L50" target="_blank" class="source-link">
                            shandu/research/researcher.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/processors/report_generator.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/processors/report_generator.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/processors/content_processor.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/processors/content_processor.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/langgraph_agent.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/langgraph_agent.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/graph/wrapper.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/graph/wrapper.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/graph/builder.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/graph/builder.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/nodes/generate_queries.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/nodes/generate_queries.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/nodes/source_selection.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/nodes/source_selection.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/nodes/report_generation.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/nodes/report_generation.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/nodes/search.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/nodes/search.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/utils/agent_utils.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/utils/agent_utils.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/utils/citation_manager.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/utils/citation_manager.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/agent.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/agent.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/nodes/initialize.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/nodes/initialize.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/tests/test_report_generator.py#L7-L56" target="_blank" class="source-link">
                            tests/test_report_generator.py
                            <span class="ml-1 text-text-secondary">7-56</span>
                        </a>
                        
                    </div>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/tests/test_citation_registry.py#L4-L53" target="_blank" class="source-link">
                            tests/test_citation_registry.py
                            <span class="ml-1 text-text-secondary">4-53</span>
                        </a>
                        
                    </div>
                    
                </div>

                
                <div class="mb-5 overflow-hidden rounded-lg shadow-sm">
                    <table>
                        <thead>
                            <tr>
                                <th>Component/Parameter</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <tr>
                                <td><code>Stateless</code></td>
                                <td>Logger, search, scraper, and most utility modules (e.g., agent_utils.py).</td>
                            </tr>
                            
                            <tr>
                                <td><code>Stateful</code></td>
                                <td>Langgraph agent and workflow nodes maintain internal state during execution to track progress and context.</td>
                            </tr>
                            
                            <tr>
                                <td><code>**Project Infrastructure**</code></td>
                                <td>| component name | description | file path(s) |
|----------------------|-----------------------------------------------------------------------------|---------------------------------------|
| requirements | manages dependencies for the project, ensuring all necessary libraries are installed. | requirements.txt |
| packaging | defines packaging rules and metadata for distributing the project. | manifest.in, setup.py |
| licensing | specifies the open-source license governing the project's usage and distribution. | license |
| documentation | provides high-level project overview, usage instructions, and technical details. | readme.md (workspace and submodules) | ---</td>
                            </tr>
                            
                            <tr>
                                <td><code>**Data Acquisition Layer**</code></td>
                                <td>| component name | description | file path(s) |
|----------------------|-----------------------------------------------------------------------------|---------------------------------------|
| scraper | extracts structured data from web sources, supporting research and search operations. | shandu/scraper/scraper.py |
| search engine | performs traditional and ai-enhanced searches to retrieve relevant information. | shandu/search/search.py, shandu/search/ai_search.py | ---</td>
                            </tr>
                            
                            <tr>
                                <td><code>**Agent System Layer**</code></td>
                                <td>| component name | description | file path(s) |
|----------------------|-----------------------------------------------------------------------------|---------------------------------------|
| agent base | provides a foundational class for defining agent behaviors and interactions. | shandu/agents/agent.py |
| langgraph agent | implements a graph-based agent system for modular, stepwise task execution. | shandu/agents/langgraphmanager.py |
| citation registry| tracks and organizes citations globally, ensuring consistency across reports. | shandu/agents/utils/citation_registry.py | ---</td>
                            </tr>
                            
                            <tr>
                                <td><code>**Design Patterns and Techniques**</code></td>
                                <td>Modular architecture: components are decoupled (e.g., scraper, search, agents) to allow independent development and testing.strategy pattern: search implementations (search.py vs. aiselection.py, report_generation.py) form a stepwise processing chain. ---</td>
                            </tr>
                            
                            <tr>
                                <td><code>**State Analysis**</code></td>
                                <td>Stateless: logger, search, scraper, and most utility modules (e.g., agent_utils.py).
stateful: langgraph agent and workflow nodes maintain internal state during execution to track progress and context. ---</td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
                

                
                <div class="mermaid mb-6">
                    graph TD
    Researcher[shandu/research/researcher.py] -->|uses| Processor1[shandu/agents/processors/content_processor.py]
    Researcher -->|uses| Processor2[shandu/agents/processors/report_generator.py]
    LangGraphAgent[shandu/agents/langgraph_agent.py] -->|depends on| Nodes[shandu/agents/nodes]
    Nodes --> Node1[shandu/agents/nodes/generate_queries.py]
    Nodes --> Node2[shandu/agents/nodes/source_selection.py]
    Nodes --> Node3[shandu/agents/nodes/report_generation.py]
    Nodes --> Node4[shandu/agents/nodes/reflect.py]
    LangGraphAgent -->|uses| Utils[shandu/agents/utils]
    Utils --> Util1[shandu/agents/utils/agent_utils.py]
    Utils --> Util2[shandu/agents/utils/citation_manager.py]
    Utils --> Util3[shandu/agents/utils/citation_registry.py]
    Search[shandu/search/search.py] -->|extends| AISearch[shandu/search/ai_search.py]
    Search -->|uses| Scraper[shandu/scraper/scraper.py]
    classDef modules fill:#ccf,stroke:#333;
    classDef submodules fill:#ffc,stroke:#333;
    class Researcher,Search,LangGraphAgent modules
    class Processor1,Processor2,Nodes,Utils,submodules
                </div>
                

                
                <div id="component-stateless" class="component-card">
                    <div class="component-header">
                        <h3>Stateless</h3>
                    </div>
                    <div class="component-body">
                        
                        <div class="component-section">
                            <div class="section-title">Purpose</div>
                            <div class="section-content">Based on the project structure and naming conventions in the Shandu workspace, I'll provide comprehensive documentation for the **Stateless** component, which appears to be a core architectural pattern used in the agent system. While the component isn't explicitly named in the file tree, its implementation is evident in the `shandu/agents/langgraph_agent.py` and related modules.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">Interaction**
Developers interact with the stateless component by:
- **Configuring the graph**: Using `builder.py` in `shandu/agents/graph` to define node dependencies.
- **Passing input data**: Providing a `ResearchInput` object (likely a Pydantic model) to the agent.
- **Retrieving results**: Capturing outputs from nodes via the `StatelessGraph` interface.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Scalability</code></td>
                                            <td>Allowing parallel execution of tasks without shared state conflicts.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Modularity</code></td>
                                            <td>Enabling individual processing nodes (e.g., query generation, source selection) to operate independently.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Immutability</code></td>
                                            <td>Inputs and outputs are passed as immutable data structures (e.g., dictionaries, tuples).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>LangGraphAgent</code></td>
                                            <td>** (in `shandu/agents/langgraph_agent.py`):  
  Manages the stateless graph execution lifecycle.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>StatelessGraph</code></td>
                                            <td>** (in `shandu/agents/graph/wrapper.py`):  
  Abstracts the LangGraph workflow as a stateless interface.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>process_input(input_data)</code></td>
                                            <td>Executes the stateless graph with the provided input, returning final output.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>clear_cache()</code></td>
                                            <td>Resets any transient state (e.g., cached results) to ensure true statelessness.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>model_name</code></td>
                                            <td>("gpt-4o-mini"):  
  Specifies the LLM model used for stateless processing (e.g., Gemini, Mistral).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>tool_registry</code></td>
                                            <td>(default: `None`):  
  A registry of tools (e.g., search APIs, citation managers) injected into nodes.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Overhead</code></td>
                                            <td>Repeated initialization of tools (e.g., LLM clients) may impact performance.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Caching</code></td>
                                            <td>Optional caching of node outputs (via `agent_utils.py`) to reduce redundant computations.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Utilities</code></td>
                                            <td>`shandu/agents/utils/agent_utils.py`  
  `shandu/agents/utils/citation_manager.py`</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Reproducibility</code></td>
                                            <td>Same input always produces the same output.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Simplicity</code></td>
                                            <td>Easier to test and debug individual components (e.g., `test_citation_registry.py`).</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>Stateless.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.nodes.initialize import InitializeNode

agent = LangGraphAgent(graph_builder=InitializeNode())
result = agent.process_input(research_query="What caused the French Revolution?")</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-stateful" class="component-card">
                    <div class="component-header">
                        <h3>Stateful</h3>
                    </div>
                    <div class="component-body">
                        
                        <div class="component-section">
                            <div class="section-title">Purpose</div>
                            <div class="section-content">The **Stateful** component in the Shandu project is a critical architectural element designed to manage and persist state across complex workflows, particularly in the context of research agents and multi-step operations. Below is a detailed breakdown of its design, implementation, and usage, contextualized within the provided project structure.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">usage, contextualized within the provided project structure.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Serialization</code></td>
                                            <td>Uses JSON or pickle for state persistence (likely in `agent_utils.py` or `citation_manager.py`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>ResearchState</code></td>
                                            <td>** (likely in `shandu/agents/nodes/initialize.py` or `agent_utils.py`):
  - Manages the core state dictionary and provides access to subcomponents.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>StatefulAgent</code></td>
                                            <td>** (in `shandu/agents/agent.py`):
  - Wraps agent logic around a `ResearchState` instance.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>initialize_state()</code></td>
                                            <td>Sets up the initial state with default values (e.g., empty sources, citations).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>get_state()</code></td>
                                            <td>Returns the current state or a specific subcomponent (e.g., `state.get_state("citations")`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>load_state(file_path)</code></td>
                                            <td>Deserializes a saved state into memory.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>initial_query</code></td>
                                            <td>(str): The starting research question (default: `""`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>persistence_enabled</code></td>
                                            <td>(bool): Whether to save state to disk (default: `False`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>version</code></td>
                                            <td>(str): Version of the state schema (default: `"1.0"`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Consistency</code></td>
                                            <td>All processors interact with a unified state interface.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Resilience</code></td>
                                            <td>Persistence allows workflows to survive interruptions, critical for long-running research tasks.</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>Stateful.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>state = ResearchState(initial_query="AI ethics")
search_node = SearchNode()
search_node.execute(state)  # Updates state.sources
processor = ContentProcessor()
processor.process(state)    # Updates state.content</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-**project-infrastructure**" class="component-card">
                    <div class="component-header">
                        <h3>**Project Infrastructure**</h3>
                    </div>
                    <div class="component-body">
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">Interaction**
Developers interact with the infrastructure through:
- **Configuration overrides**: Modify `config.py` or set environment variables (e.g., `SHANDU_LOG_LEVEL=DEBUG`).
- **CLI commands**: Run `shandu` commands (e.g., `shandu search "query"` or `shandu generate-report`).
- **Logging integration**: Use `utils.logger.get_logger()` to inject loggers into modules.
- **Dependency management**: Update `requirements.txt` or `setup.py` for new dependencies.
- **Testing**: Leverage `tests/` for unit/integration tests, mocking infrastructure components as needed.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Packaging</code></td>
                                            <td>`setup.py` defines the projects metadata and dependencies, while `MANIFEST.in` ensures non-Python files (e.g., example `.md` files) are included in distributions.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Testing</code></td>
                                            <td>Leverage `tests/` for unit/integration tests, mocking infrastructure components as needed.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Config</code></td>
                                            <td>class** (`shandu/config.py`):
  - `get_api_key()`: Retrieves the API key for LLMs from environment variables or config.
  - `set_log_level(level)`: Dynamically adjusts the logging level for the application.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Logger</code></td>
                                            <td>class** (`shandu/utils/logger.py`):
  - `get_logger(name)`: Returns a configured logger instance for a given module.
  - `setup_logger()`: Initializes the logging system with handlers and formatters.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>main()</code></td>
                                            <td>function** (`shandu/cli.py`):
  - `run_search()`: Entry point for executing search commands via CLI.
  - `generate_report()`: CLI command to trigger report generation workflows.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>setup()</code></td>
                                            <td>function** (`setup.py`):
  - `find_packages()`: Automates package discovery for distribution.
  - `install_requires()`: Lists dependencies for the project.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>SHANDU_LOG_LEVEL</code></td>
                                            <td>** (`DEBUG`): Sets the logging verbosity (options: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>LLM_MODEL</code></td>
                                            <td>** (`"gpt-4o-mini"`): Specifies the default LLM model for agents.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>MAX_SEARCH_RESULTS</code></td>
                                            <td>** (`10`): Caps the number of search results retrieved per query.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>SCRAPE_TIMEOUT</code></td>
                                            <td>** (`30`): Sets the timeout (in seconds) for web scraping requests.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>CITATION_REGISTRY_PATH</code></td>
                                            <td>** (`"./citations.json"`): Defines the file path for storing citation metadata.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Configuration</code></td>
                                            <td>`shandu/config.py`</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>CLI</code></td>
                                            <td>`shandu/cli.py`</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Parameters</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Parameter</th>
                                            <th>Default Value</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>DEBUG</code></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>LLM_MODEL</code></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>MAX_SEARCH_RESULTS</code></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>SCRAPE_TIMEOUT</code></td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>**Project Infrastructure**.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># In a custom script
from shandu.config import Config
Config.LLM_MODEL = "gemini-flash2.5"
Config.MAX_SEARCH_RESULTS = 20</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-**data-acquisition-layer**" class="component-card">
                    <div class="component-header">
                        <h3>**Data Acquisition Layer**</h3>
                    </div>
                    <div class="component-body">
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">usage, and implementation.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Scraper</code></td>
                                            <td>Class**:  
  - `fetch(url, parser="default", headers=None, timeout=10, max_retries=3)`: Fetches a URL, applies the specified parser, and returns structured data.  
  - `parse_html(html, parser_type="beautifulsoup")`: Parses raw HTML using the configured parser.  
  - `handle_errors(response)`: Validates the HTTP response and raises exceptions for errors (e.g., 4xx/5xx status codes).  
  - `rotate_headers()`: Dynamically updates request headers to mimic different browsers.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>HTMLParser</code></td>
                                            <td>Interface**:  
  - `extract_content(html)`: Abstract method for extracting content from HTML. Implemented by parser-specific classes (e.g., `BeautifulSoupParser`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>APIRequestHandler</code></td>
                                            <td>Class**:  
  - `send_api_request(endpoint, params)`: Handles API calls with authentication and rate-limiting headers.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>url</code></td>
                                            <td>(required): The target URL to scrape.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>headers</code></td>
                                            <td>(default=None): Custom HTTP headers for the request.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>max_retries</code></td>
                                            <td>(default=3): Number of retries for failed requests.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>cache_dir</code></td>
                                            <td>(default="cache/"): Directory to store cached responses for faster re-fetching.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Caching</code></td>
                                            <td>Stores responses in `cache_dir` to avoid redundant requests.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Configuration</code></td>
                                            <td>- `shandu/config.py` (for default headers, timeouts, etc.).</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>**Data Acquisition Layer**.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.scraper import Scraper  
scraper = Scraper()  
data = scraper.fetch("https://example.com", parser="beautifulsoup")</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-**agent-system-layer**" class="component-card">
                    <div class="component-header">
                        <h3>**Agent System Layer**</h3>
                    </div>
                    <div class="component-body">
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">usage.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Configuration</code></td>
                                            <td>Define agent behavior in `shandu/config.py` (e.g., model choices, search depth).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Testing</code></td>
                                            <td>Validate agent behavior using test cases in `tests/test_report_generator.py` and `tests/test_citation_registry.py`.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Classes</code></td>
                                            <td>- `Agent` (base class in `shandu/agents/agent.py`): Abstracts the agent lifecycle and provides hooks for customization.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Researcher</code></td>
                                            <td>(in `shandu/research/researcher.py`): Coordinates the execution of the agent graph.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Node</code></td>
                                            <td>(abstract base class for all nodes in `shandu/agents/nodes`): Defines the `execute()` method for task-specific logic.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>model_name</code></td>
                                            <td>("gpt-4o-mini"): Specifies the LLM used for query generation, reflection, and report writing.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>search_depth</code></td>
                                            <td>(3): Controls how many sources are retrieved per search step.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>enable_reflection</code></td>
                                            <td>(True): Enables the reflection node to refine search strategies iteratively.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Utilities</code></td>
                                            <td>- `shandu/agents/utils/agent_utils.py`  
  - `shandu/agents/utils/citation_manager.py`</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>**Agent System Layer**.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.langgraph_agent import LangGraphAgent

agent = LangGraphAgent(model_name="gpt-4o-mini", max_iterations=3)
result = agent.run("What are the latest advancements in renewable energy?")
print(result["report"])</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-**design-patterns-and-techniques**" class="component-card">
                    <div class="component-header">
                        <h3>**Design Patterns and Techniques**</h3>
                    </div>
                    <div class="component-body">
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">interactions, and extensible processing logic. Below is a detailed breakdown:</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Extensibility</code></td>
                                            <td>Supporting new agent types or processing steps without modifying existing code (Open/Closed Principle).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Testing</code></td>
                                            <td>Writing unit tests in `tests/` (e.g., `test_citation_registry.py`) to validate node behavior.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Classes</code></td>
                                            <td>- `GraphBuilder`: Constructs and validates agent workflows.  
  - `BaseNode`: Abstract base class for all workflow nodes.  
  - `CitationManager`: Manages citations and source tracking.  
  - `ReportGenerator`: Generates structured reports from processed data.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Methods</code></td>
                                            <td>- `GraphBuilder.add_node(node)`: Registers a node in the workflow.  
  - `BaseNode.execute(context)`: Abstract method defining the node's processing logic.  
  - `CitationManager.register_source(source)`: Tracks a source for citation.  
  - `ReportGenerator.compile(data)`: Aggregates data into a final report.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Interfaces</code></td>
                                            <td>- `NodeInterface`: Ensures all nodes implement `execute()` and `validate()`.  
  - `SearchStrategy`: Abstract interface for search implementations (used in `search.py` and `ai_search.py`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>search_engine</code></td>
                                            <td>("default"): Specifies the search strategy (e.g., "ai_search", "traditional").</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>citation_style</code></td>
                                            <td>("APA"): Determines formatting rules for citations.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>log_level</code></td>
                                            <td>("INFO"): Sets verbosity for logging (via `shandu/utils/logger.py`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Caching</code></td>
                                            <td>`SearchNode` caches results to avoid redundant queries (configurable via `cache_ttl` in `config.py`).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Nodes</code></td>
                                            <td>- `shandu/agents/nodes/generate_queries.py`  
  - `shandu/agents/nodes/report_generation.py`  
  - `shandu/agents/nodes/search.py`</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>**Design Patterns and Techniques**.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes.initialize import InitializeNode
from shandu.agents.nodes.search import SearchNode

builder = GraphBuilder()
builder.add_node(InitializeNode())
builder.add_node(SearchNode(search_engine="ai_search"))
workflow = builder.build()</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <div id="component-**state-analysis**" class="component-card">
                    <div class="component-header">
                        <h3>**State Analysis**</h3>
                    </div>
                    <div class="component-body">
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Usage</div>
                            <div class="section-content">Interaction**  
Developers interact with the State Analysis component by:  
- **Initializing the state** with required parameters (e.g., research topic, max depth).  
- **Accessing state attributes** in nodes (e.g., `state.topic`, `state.citations`).  
- **Defining state transitions** in node logic (e.g., updating `state.progress` after a search).  
- **Extending the state class** to add new attributes for custom workflows.</div>
                        </div>
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Key Methods</div>
                            <div class="overflow-hidden rounded-lg shadow-sm">
                                <table class="compact-table">
                                    <thead>
                                        <tr>
                                            <th>Method</th>
                                            <th>Description</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        <tr>
                                            <td><code>Techniques</code></td>
                                            <td>- **Immutable State Updates**: State is updated via immutable transformations to avoid side effects.  
  - **Event-Driven Architecture**: Nodes trigger state changes through events (e.g., "search_complete", "report_generated").  
  - **Dependency Injection**: The state is injected into nodes (e.g., `search.py`, `source_selection.py`) to decouple logic.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>Caching</code></td>
                                            <td>for frequently accessed state data (e.g., citations, intermediate results).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>ResearchState</code></td>
                                            <td>Class**:  
  - `__init__(topic, max_depth, logger=None)`: Initializes the state with a research topic, depth limit, and optional logger.  
  - `update_citations(new_citations)`: Merges new citations into the state.  
  - `get_progress()`: Returns the current progress percentage.  
  - `reset()`: Resets the state for a new research task.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>LangGraphAgent</code></td>
                                            <td>Class (in `langgraph_agent.py`)**:  
  - `set_state(state)`: Injects a custom state into the agent.  
  - `get_current_state()`: Retrieves the latest state for inspection or debugging.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>StateValidator</code></td>
                                            <td>Interface (in `agent_utils.py`)**:  
  - `validate(state)`: Ensures the state meets constraints (e.g., depth limit not exceeded).</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>topic</code></td>
                                            <td>(str): The research topic to analyze.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>logger</code></td>
                                            <td>(Logger, default=None): Optional logger for state changes.</td>
                                        </tr>
                                        
                                        <tr>
                                            <td><code>cache_size</code></td>
                                            <td>(int, default=100): Maximum number of cached results for performance.</td>
                                        </tr>
                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        
                        
                        
                        
                        <div class="component-section">
                            <div class="section-title">Example</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>**State Analysis**.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.initialize import ResearchState
state = ResearchState(topic="Climate Change", max_depth=3)</code></pre>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
            </div>

            <div class="mb-12" id="usage">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Using shandu</h1>
                
                <div class="flex flex-wrap items-center mb-3 text-xs text-text-secondary">
                    <span class="mr-2">Sources:</span>
                    
                </div>

                <h2 class="text-xl font-semibold text-text-heading mb-3">Getting Started</h2>
                <div class="markdown-content"></div>
                
                
                <pre><code>from shandu.research.researcher import Researcher
from shandu.agents.langgraph_agent import LangGraphAgent

# Initialize agent with model from examples
agent = LangGraphAgent(model_config="examples/gpt4.0-mini.md")

# Create researcher and execute query
researcher = Researcher(agent=agent)
result = researcher.search("Explain the theory of relativity")
print(result.summary)</code></pre>
                
                
                
                <h2 class="text-xl font-semibold text-text-heading mt-8 mb-3">Advanced Usage</h2>
                <div class="markdown-content">

# Shandu Repository Usage Guide

This guide provides practical instructions for using the Shandu research system, covering basic to advanced workflows. The system is designed for AI-powered research tasks with modular components for search, processing, and reporting.

---

## 1. Getting Started with Basic Examples

### Installation
```bash
# Navigate to workspace
cd /media/sc/data/sc/openwiki/output/shandu

# Install dependencies
pip install -r requirements.txt
```

### Basic CLI Usage
```bash
# Run a search using the default agent
python -m shandu.cli --config examples/gemini-flash2.5.md "What are the latest advancements in quantum computing?"

# Generate a report using a specific model
python -m shandu.cli --config examples/mistral_large.md --query "History of the Roman Empire" --output reports/roman_history.md
```

---

## 2. Initialization and Configuration

### Configuration File
Modify `shandu/config.py` to set global parameters:
```python
# Example configuration
DEFAULT_MODEL = "gemini-flash2.5"
MAX_SEARCH_RESULTS = 10
LOG_LEVEL = "INFO"
```

### Environment Variables
```bash
# Set API keys for models
export GEMINI_API_KEY="your-gemini-key"
export MISTRAL_API_KEY="your-mistral-key"
```

---

## 3. Common Usage Patterns

### Example 1: Basic Research Agent
```python
from shandu.research.researcher import Researcher
from shandu.agents.langgraph_agent import LangGraphAgent

# Initialize agent with model from examples
agent = LangGraphAgent(model_config="examples/gpt4.0-mini.md")

# Create researcher and execute query
researcher = Researcher(agent=agent)
result = researcher.search("Explain the theory of relativity")
print(result.summary)
```

### Example 2: Report Generation
```python
from shandu.agents.processors.report_generator import ReportGenerator

# Generate structured report
generator = ReportGenerator(output_dir="reports")
report = generator.create_report(
    query="AI ethics frameworks",
    sources=["https://example.com/ai-ethics1", "https://example.com/ai-ethics2"],
    format="markdown"
)
print(f"Report saved to: {report.file_path}")
```

### Example 3: Citation Management
```python
from shandu.agents.utils.citation_manager import CitationManager

# Add and format citations
manager = CitationManager()
manager.add_source("https://example.com/quantum-paper", "Quantum Computing Journal", 2023)
manager.add_source("https://example.com/ai-framework", "AI Ethics Institute", 2022)

formatted_citations = manager.format_citations(style="APA")
print(formatted_citations)
```

---

## 4. Advanced Usage Scenarios

### Custom Graph Workflow
```python
from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes import generate_queries, source_selection, report_generation

# Build custom research graph
builder = GraphBuilder()
builder.add_node("query_gen", generate_queries.generate_research_queries)
builder.add_node("select_sources", source_selection.select_top_sources)
builder.add_node("gen_report", report_generation.generate_full_report)

# Connect nodes with specific parameters
builder.connect("query_gen", "select_sources", max_sources=5)
builder.connect("select_sources", "gen_report", citation_style="MLA")

# Execute workflow
workflow = builder.build()
result = workflow.run("What caused the fall of the Roman Empire?")
```

### Multi-Agent Collaboration
```python
from shandu.agents.agent import BaseAgent
from shandu.agents.langgraph_agent import LangGraphAgent

# Initialize agents with different models
agent1 = LangGraphAgent(model_config="examples/gemini.md")
agent2 = BaseAgent(model="o3-mini-high", config_path="examples/o3-mini-high.md")

# Chain agents for complex tasks
from shandu.agents.utils.agent_utils import chain_agents
chained_agent = chain_agents([agent1, agent2])

result = chained_agent.execute("Compare machine learning approaches in medical diagnosis")
print(result.final_answer)
```

---

## 5. Performance Optimization Tips

1. **Search Optimization**:
   - Use `shandu.search.ai_search` for focused queries
   - Set `MAX_SEARCH_RESULTS` in `config.py` to 5-10 for most tasks

2. **Caching**:
   ```python
   from shandu.utils.logger import setup_cache
   setup_cache(cache_dir="cache", max_size=100)
   ```

3. **Parallel Processing**:
   ```python
   from shandu.agents.nodes.search import parallel_search
   results = parallel_search(queries=["AI ethics", "Quantum computing"], max_workers=4)
   ```

4. **Model Selection**:
   - Use `gemini-flash2.5` for cost-sensitive tasks
   - Use `mistral_large` for high-accuracy requirements

---

## 6. Best Practices

1. **Configuration Management**:
   - Store model-specific configurations in `examples/` directory
   - Use environment variables for API keys (never commit them)

2. **Logging**:
   ```python
   from shandu.utils.logger import get_logger
   logger = get_logger(__name__)
   logger.info("Starting research workflow", extra={"query": "AI ethics"})
   ```

3. **Citation Workflow**:
   - Always use `CitationManager` for source tracking
   - Register citations in `shandu/agents/utils/citation_registry.py`

4. **Testing**:
   - Run unit tests with: `python -m pytest tests/`
   - Test report generation: `python tests/test_report_generator.py`

---

## 7. Key File Paths and Imports

| Component          | File Path                          | Key Import                                      |
|--------------------|------------------------------------|-------------------------------------------------|
| Core Configuration | `shandu/config.py`                 | `from shandu import config`                     |
| CLI Interface      | `shandu/cli.py`                    | `from shandu import cli`                        |
| Web Scraper        | `shandu/scraper/scraper.py`        | `from shandu.scraper import scraper`            |
| Search Engine      | `shandu/search/ai_search.py`       | `from shandu.search import ai_search`           |
| Report Generation  | `shandu/agents/processors/report_generator.py` | `from shandu.agents.processors import report_generator` |
| Citation System    | `shandu/agents/utils/citation_manager.py` | `from shandu.agents.utils import citation_manager` |

---

## Code Examples for Different Use Cases

### Academic Research Workflow
```python
from shandu.research.researcher import Researcher
researcher = Researcher(model="gpt4.0-mini", search_depth=3)
result = researcher.expanded_search("CRISPR gene editing breakthroughs")
result.save_to_file("crispr_research.md", citations=True)
```

### Technical Documentation Analysis
```python
from shandu.agents.nodes.source_selection import select_technical_sources
sources = select_technical_sources(
    query="Python async programming",
    source_types=["github", "developer_portal"],
    max_sources=3
)
print([s.url for s in sources])
```

### Multi-Step Research Pipeline
```python
from shandu.agents.graph.wrapper import GraphWrapper

# Initialize with pre-defined graph
pipeline = GraphWrapper(graph_config="examples/advanced_pipeline.md")

# Execute with reflection node
result = pipeline.run("Evaluate renewable energy storage solutions", enable_reflection=True)
print(result.reflection_summary)
```

### Custom Node Integration
```python
from shandu.agents.nodes import NodeBase
from shandu.agents.graph.builder import GraphBuilder

class DataValidator(NodeBase):
    def process(self, data):
        return {"validated_data": data, "valid": True}

builder = GraphBuilder()
builder.add_node("validator", DataValidator())
workflow = builder.build()
result = workflow.run("Validate climate change data", nodes=["validator"])
```

---

## Troubleshooting and Debugging

1. **Check Logs**:
   - Debug logs are stored in `logs/debug.log`
   - Use `shandu/utils/logger.py` to adjust verbosity

2. **Test Configurations**:
   - Validate model configs with: `python examples/gpt4.0-mini.md --test`

3. **Memory Management**:
   - For large tasks, set `config.MAX_CONTEXT_LENGTH = 32768` in `config.py`

---

This guide demonstrates the core capabilities of the Shandu system. For specific model configurations, refer to the example files in the `examples/` directory. Always use the `CitationManager` for academic integrity and consider the `parallel_search` function for large-scale research tasks.</div>
                
                
                
            </div>

            <div class="mb-12" id="installation">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Installation & Setup</h1>
                
                <div class="flex flex-wrap items-center mb-3 text-xs text-text-secondary">
                    <span class="mr-2">Sources:</span>
                    
                    <div class="source-reference">
                        <svg class="source-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M3.75 1.5a.25.25 0 00-.25.25v11.5c0 .138.112.25.25.25h8.5a.25.25 0 00.25-.25V6H9.75A1.75 1.75 0 018 4.25V1.5H3.75zm5.75.56v2.19c0 .138.112.25.25.25h2.19L9.5 2.06zM2 1.75C2 .784 2.784 0 3.75 0h5.086c.464 0 .909.184 1.237.513l3.414 3.414c.329.328.513.773.513 1.237v8.086A1.75 1.75 0 0112.25 15h-8.5A1.75 1.75 0 012 13.25V1.75z"></path>
                        </svg>
                        
                        <a href="https://github.com/SerendipitySTAR/shandu/blob/main/shandu/agents/utils/citation_registry.py#L1-L50" target="_blank" class="source-link">
                            shandu/agents/utils/citation_registry.py
                            <span class="ml-1 text-text-secondary">1-50</span>
                        </a>
                        
                    </div>
                    
                </div>

                <div class="markdown-content"># Shandu Repository Installation & Setup Guide

## Prerequisites and Dependencies
### Required Software
- **Python 3.8+** (Verify with `python --version` or `python3 --version`)
- **pip** (Python package installer, typically included with Python)
- **Virtual environment** (Recommended for development: `python -m venv venv`)

### Required Accounts/Services
- **API Keys** (If using AI search features in `shandu/search/ai_search.py`, ensure you have access to the required LLM APIs like Gemini, GPT-4, Mistral, etc.)
- **Internet access** (For downloading dependencies)

### Dependencies
- **Core dependencies** listed in `requirements.txt` (located at the root of the workspace).
- **Development dependencies** (e.g., `pytest`, `pytest-cov`) may need to be installed separately if testing is required.

---

## Step-by-Step Installation Process

### **For Development Environment**
1. Clone the repository to your local machine.
2. Navigate to the root directory:
   
   cd /media/sc/data/sc/openwiki/output/shandu
   
3. Create a virtual environment:
   
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   venv\Scripts\activate     # Windows
   
4. Install dependencies:
   
   pip install -r requirements.txt
   
5. Install the package in editable mode for development:
   
   pip install -e .
   
6. (Optional) Install testing tools:
   
   pip install pytest pytest-cov
   

### **For Production Environment**
1. Navigate to the root directory:
   
   cd /media/sc/data/sc/openwiki/output/shandu
   
2. Install dependencies:
   
   pip install -r requirements.txt
   
3. Install the package:
   
   pip install .
   

---

## Configuration Options and Environment Variables

### **Environment Variables**
- **`SHANDU_LOG_LEVEL`**: Set logging verbosity (e.g., `DEBUG`, `INFO`).  
  Example:
  
  export SHANDU_LOG_LEVEL=DEBUG  # Linux/macOS
  set SHANDU_LOG_LEVEL=DEBUG     # Windows
  
- **`SHANDU_API_KEY`**: Required for AI search features. Replace with your actual API key:
  
  export SHANDU_API_KEY=your_api_key_here
  

### **Configuration Files**
- Modify `shandu/config.py` to adjust default settings (e.g., search engine parameters, output directories).
- Example: Update the `MAX_SEARCH_RESULTS` variable in `config.py` to control the number of search results fetched.

---

## Verify Installation Success

### **Run CLI Command**
Use the `cli.py` script to test basic functionality:

python shandu/cli.py --help

Expected output: A list of available CLI commands (e.g., `search`, `scrape`, `generate-report`).

### **Run Unit Tests**
Execute tests in the `tests/` directory:

pytest tests/

Ensure all tests pass without errors.

### **Test AI Search**
Run a sample AI search using the `ai_search.py` module:

python -c "from shandu.search.ai_search import AIAgent; AIAgent().search('test query')"

Verify that results are returned and no API key errors occur.

---

## Common Installation Problems & Solutions

### **Problem 1: Missing Dependencies**
- **Symptom**: `ModuleNotFoundError` for packages like `langgraph` or `requests`.
- **Solution**: Ensure all dependencies are installed:
  
  pip install -r requirements.txt
  

### **Problem 2: API Key Not Set**
- **Symptom**: Errors in `shandu/search/ai_search.py` related to missing API keys.
- **Solution**: Set the `SHANDU_API_KEY` environment variable as described in Section 3.

### **Problem 3: Permission Issues**
- **Symptom**: `Permission denied` when installing globally.
- **Solution**: Use a virtual environment or install locally:
  
  pip install --user .
  

### **Problem 4: Logging Not Working**
- **Symptom**: No logs appear during execution.
- **Solution**: Set the `SHANDU_LOG_LEVEL` environment variable and verify `shandu/utils/logger.py` is configured correctly.

---

## Setup Files Reference

### **Key Files**
- **`requirements.txt`**: Root directory (`/media/sc/data/sc/openwiki/output/shandu/requirements.txt`)
- **`setup.py`**: Root directory (used for packaging and installation).
- **`MANIFEST.in`**: Root directory (specifies additional files to include in the package).
- **`shandu/config.py`**: Central configuration file for the project.
- **`shandu/agents/utils/citation_registry.py`**: Manages citation configurations (modify if needed).

---

## Installation Methods Comparison

| Method                          | Benefits                                  | Drawbacks                                  |
|---------------------------------|-------------------------------------------|--------------------------------------------|
| **Editable Mode (`pip -e .`)**   | Allows real-time code changes for development | Not recommended for production              |
| **Standard Install (`pip .`)**   | Clean, isolated installation for production | Changes to source code require reinstallation |
| **Manual Setup (`setup.py`)**    | Full control over installation process     | More error-prone and time-consuming          |

---

## OS-Specific Notes

### **Linux/macOS**
- Use `source venv/bin/activate` to activate the virtual environment.
- Ensure proper permissions for script execution if needed.

### **Windows**
- Use `venv\Scripts\activate` to activate the virtual environment.
- Avoid using backslashes in file paths (use forward slashes or raw strings).

---

By following these steps, you should have a fully functional Shandu environment. For advanced configurations, refer to the `examples/` directory for sample workflows (e.g., `gemini.md`, `gpt4.0-mini.md`).</div>
                
                <script>
                    document.addEventListener('DOMContentLoaded', function() {
                        const installationSection = document.querySelector('#installation .markdown-content');
                        if (installationSection) {
                            const stepRegex = /^(\d+)\.\s+(.+?)\s*$/gm;
                            let html = installationSection.innerHTML;
                            
                            const steps = [];
                            let match;
                            while ((match = stepRegex.exec(html)) !== null) {
                                steps.push({
                                    number: match[1],
                                    title: match[2],
                                    content: ''
                                });
                            }
                            
                            if (steps.length > 0) {
                                for (let i = 0; i < steps.length; i++) {
                                    const currentStep = steps[i];
                                    const stepTitleRegex = new RegExp(`^${currentStep.number}\\.\\s+${escapeRegExp(currentStep.title)}\\s*`, 'm');
                                    
                                    const startIndex = html.search(stepTitleRegex);
                                    if (startIndex !== -1) {
                                        let endIndex;
                                        if (i < steps.length - 1) {
                                            const nextStepRegex = new RegExp(`^${steps[i+1].number}\\.\\s+${escapeRegExp(steps[i+1].title)}\\s*`, 'm');
                                            endIndex = html.search(nextStepRegex);
                                        } else {
                                            endIndex = html.length;
                                        }
                                        
                                        if (endIndex !== -1) {
                                            const titleEndIndex = startIndex + html.substring(startIndex).indexOf('\n');
                                            currentStep.content = html.substring(titleEndIndex, endIndex).trim();
                                        }
                                    }
                                }
                                
                                const flowStepsHtml = `
                                <div class="flow-steps">
                                    ${steps.map(step => `
                                    <div class="flow-step">
                                        <div class="flow-step-number">${step.number}</div>
                                        <div class="flow-step-content">
                                            <div class="flow-step-title">${step.title}</div>
                                            <div class="flow-step-description">${step.content}</div>
                                        </div>
                                    </div>
                                    `).join('')}
                                </div>
                                `;
                                
                                installationSection.insertAdjacentHTML('beforeend', '<h2 class="text-xl font-semibold text-text-heading mt-8 mb-4">Visual Installation Guide</h2>' + flowStepsHtml);
                            }
                        }
                        
                        function escapeRegExp(string) {
                            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                        }
                    });
                </script>
            </div>

            
            <div class="mb-12" id="parameters">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Parameters</h1>
                
                <div class="overflow-hidden rounded-lg shadow-sm">
                    <table>
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Typical Values</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody>
                            
                            <tr>
                                <td><code>data</code></td>
                                <td><built-in method values of dict object at 0x7f2ee1761280></td>
                                <td>Required parameter for function process</td>
                            </tr>
                            
                        </tbody>
                    </table>
                </div>
            </div>
            
            
            

            
            <div class="mb-12" id="advanced-topics">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Advanced Topics</h1>
                
                <div class="markdown-content"># Advanced Documentation for Shandu Repository

## Performance Optimization Strategies

The Shandu system employs several performance optimization techniques across its components. For web scraping operations in `shandu/scraper/scraper.py`, consider implementing:

# Example: Asynchronous scraping with aiohttp
import aiohttp
import asyncio

async def fetch(session, url):
    async with session.get(url) as response:
        return await response.text()

async def main(urls):
    async with aiohttp.ClientSession() as session:
        results = await asyncio.gather(*[fetch(session, url) for url in urls])
        return results

# Run with: asyncio.run(main(urls))

For search operations in `shandu/search/ai_search.py`, leverage vector database optimizations:
- Batch processing of search queries
- Caching frequent search results in `shandu/utils/logger.py` with Redis integration
- Using connection pooling for database operations

## Extending or Customizing the System

Custom agent implementations can be added in `shandu/agents/` directory. To create a new processor:

# Example: Custom processor in shandu/agents/processors/
from shandu.agents.base_processor import BaseProcessor

class CustomProcessor(BaseProcessor):
    def process(self, content: str, config: dict) -> str:
        # Implement custom processing logic
        return self._apply_transformations(content, config.get("custom_rules", []))

Modify behavior through configuration in `shandu/config.py`:

# Example: Custom configuration parameters
CUSTOM_PROCESSOR_PARAMS = {
    "max_depth": 5,
    "timeout": 30,
    "retry_attempts": 3
}

## Internal Architecture Details

The system follows a modular architecture with clear separation:
- **Scraper Module**: Handles web content extraction with configurable parsers
- **Search Subsystem**: Combines traditional search (`search.py`) and AI-enhanced search (`ai_search.py`)
- **Agent Framework**: Uses graph-based workflow in `shandu/agents/graph/wrapper.py`

Key interaction patterns:
mermaid
graph TD
    A[Scraper] -->|Raw Data| B(Search)
    B -->|Processed Results| C(Agents)
    C -->|Generated Output| D(Utils)
    D -->|Logging & Citations| E(Report)

## Complex Algorithms and Techniques

1. **Citation Management**: 
   - `shandu/agents/utils/citation_manager.py` implements a reference tracking algorithm using hash-based content fingerprinting
   - Citation registry in `citation_registry.py` maintains provenance with Merkle tree-like structures

2. **Query Optimization**:
   - `shandu/agents/nodes/generate_queries.py` uses semantic clustering to reduce redundant searches
   - Implements query rewriting with prompt engineering patterns from `prompts.py`

3. **Content Processing**:
   - `content_processor.py` applies multi-stage NLP pipelines with configurable transformers
   - Implements dynamic content weighting based on source reliability metrics

## Integration with Other Systems

The system supports multiple integration points:
- **LLM Providers**: Examples in `examples/` directory demonstrate integration patterns for Gemini, GPT, Mistral, etc.
- **API Hooks**: `shandu/agents/agent.py` provides extension points for third-party API integration
- **CLI Integration**: `cli.py` allows wrapping Shandu functionality as command-line tools

Example API integration pattern:

# In shandu/agents/agent.py
class ExternalAPIClient:
    def __init__(self, api_key: str):
        self.api_key = api_key
    
    def query(self, prompt: str) -> str:
        # Integration with external systems
        headers = {"Authorization": f"Bearer {self.api_key}"}
        # Implementation details...

## Scaling Considerations

For large-scale deployments:
- Use distributed task queues with `shandu/agents/graph/builder.py` for parallel workflow execution
- Implement database sharding in `shandu/utils/logger.py` for high-throughput logging
- Use the `search.py` module's batch processing capabilities

Example scaling configuration:

# In shandu/config.py
SCALING_CONFIG = {
    "max_concurrent_tasks": 100,
    "worker_pool_size": 10,
    "result_partitioning": "round_robin"
}

## Security Considerations

1. **Data Handling**:
   - Scraper module in `scraper.py` implements strict content sanitization
   - All external API interactions use secure authentication patterns

2. **Access Control**:
   - CLI in `cli.py` supports role-based access through config parameters
   - Citation system in `citation_manager.py` enforces provenance tracking

3. **Secure Practices**:
   
   # Example from shandu/utils/logger.py
   def secure_log(message: str):
       sanitized = sanitize_input(message)  # Prevents log injection
       if contains_sensitive_data(message):
           return log_to_secure_db(message)
       return standard_logger(message)
   

4. **Compliance**:
   - License management through `LICENSE` file integration
   - All modules follow secure coding guidelines defined in `MANIFEST.in`

The system's architecture in `shandu/agents/graph/wrapper.py` supports secure isolation of processing components, with detailed security policies configurable in `config.py`.</div>
                
                
                
                <div id="performance-optimization-strategies" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Performance Optimization Strategies</h2>
                    <div class="markdown-content">The Shandu system employs several performance optimization techniques across its components. For web scraping operations in `shandu/scraper/scraper.py`, consider implementing:

# Example: Asynchronous scraping with aiohttp
import aiohttp
import asyncio

async def fetch(session, url):
    async with session.get(url) as response:
        return await response.text()

async def main(urls):
    async with aiohttp.ClientSession() as session:
        results = await asyncio.gather(*[fetch(session, url) for url in urls])
        return results

# Run with: asyncio.run(main(urls))

For search operations in `shandu/search/ai_search.py`, leverage vector database optimizations:
- Batch processing of search queries
- Caching frequent search results in `shandu/utils/logger.py` with Redis integration
- Using connection pooling for database operations</div>
                </div>
                
                <div id="extending-or-customizing-the-system" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Extending or Customizing the System</h2>
                    <div class="markdown-content">Custom agent implementations can be added in `shandu/agents/` directory. To create a new processor:

# Example: Custom processor in shandu/agents/processors/
from shandu.agents.base_processor import BaseProcessor

class CustomProcessor(BaseProcessor):
    def process(self, content: str, config: dict) -> str:
        # Implement custom processing logic
        return self._apply_transformations(content, config.get("custom_rules", []))

Modify behavior through configuration in `shandu/config.py`:

# Example: Custom configuration parameters
CUSTOM_PROCESSOR_PARAMS = {
    "max_depth": 5,
    "timeout": 30,
    "retry_attempts": 3
}</div>
                </div>
                
                <div id="internal-architecture-details" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Internal Architecture Details</h2>
                    <div class="markdown-content">The system follows a modular architecture with clear separation:
- **Scraper Module**: Handles web content extraction with configurable parsers
- **Search Subsystem**: Combines traditional search (`search.py`) and AI-enhanced search (`ai_search.py`)
- **Agent Framework**: Uses graph-based workflow in `shandu/agents/graph/wrapper.py`

Key interaction patterns:
mermaid
graph TD
    A[Scraper] -->|Raw Data| B(Search)
    B -->|Processed Results| C(Agents)
    C -->|Generated Output| D(Utils)
    D -->|Logging & Citations| E(Report)</div>
                </div>
                
                <div id="complex-algorithms-and-techniques" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Complex Algorithms and Techniques</h2>
                    <div class="markdown-content">1. **Citation Management**: 
   - `shandu/agents/utils/citation_manager.py` implements a reference tracking algorithm using hash-based content fingerprinting
   - Citation registry in `citation_registry.py` maintains provenance with Merkle tree-like structures

2. **Query Optimization**:
   - `shandu/agents/nodes/generate_queries.py` uses semantic clustering to reduce redundant searches
   - Implements query rewriting with prompt engineering patterns from `prompts.py`

3. **Content Processing**:
   - `content_processor.py` applies multi-stage NLP pipelines with configurable transformers
   - Implements dynamic content weighting based on source reliability metrics</div>
                </div>
                
                <div id="integration-with-other-systems" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Integration with Other Systems</h2>
                    <div class="markdown-content">The system supports multiple integration points:
- **LLM Providers**: Examples in `examples/` directory demonstrate integration patterns for Gemini, GPT, Mistral, etc.
- **API Hooks**: `shandu/agents/agent.py` provides extension points for third-party API integration
- **CLI Integration**: `cli.py` allows wrapping Shandu functionality as command-line tools

Example API integration pattern:

# In shandu/agents/agent.py
class ExternalAPIClient:
    def __init__(self, api_key: str):
        self.api_key = api_key
    
    def query(self, prompt: str) -> str:
        # Integration with external systems
        headers = {"Authorization": f"Bearer {self.api_key}"}
        # Implementation details...</div>
                </div>
                
                <div id="scaling-considerations" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Scaling Considerations</h2>
                    <div class="markdown-content">For large-scale deployments:
- Use distributed task queues with `shandu/agents/graph/builder.py` for parallel workflow execution
- Implement database sharding in `shandu/utils/logger.py` for high-throughput logging
- Use the `search.py` module's batch processing capabilities

Example scaling configuration:

# In shandu/config.py
SCALING_CONFIG = {
    "max_concurrent_tasks": 100,
    "worker_pool_size": 10,
    "result_partitioning": "round_robin"
}</div>
                </div>
                
                <div id="security-considerations" class="mt-8 mb-6">
                    <h2 class="text-xl font-semibold text-text-heading mb-3">Security Considerations</h2>
                    <div class="markdown-content">1. **Data Handling**:
   - Scraper module in `scraper.py` implements strict content sanitization
   - All external API interactions use secure authentication patterns

2. **Access Control**:
   - CLI in `cli.py` supports role-based access through config parameters
   - Citation system in `citation_manager.py` enforces provenance tracking

3. **Secure Practices**:
   
   # Example from shandu/utils/logger.py
   def secure_log(message: str):
       sanitized = sanitize_input(message)  # Prevents log injection
       if contains_sensitive_data(message):
           return log_to_secure_db(message)
       return standard_logger(message)
   

4. **Compliance**:
   - License management through `LICENSE` file integration
   - All modules follow secure coding guidelines defined in `MANIFEST.in`

The system's architecture in `shandu/agents/graph/wrapper.py` supports secure isolation of processing components, with detailed security policies configurable in `config.py`.</div>
                </div>
                
                
            </div>
            
            
            
            <div class="mb-12" id="examples">
                <h1 class="text-2xl font-bold text-text-heading mb-5">Examples & Tutorials</h1>
                
                <div class="markdown-content"># Shandu Project Examples & Tutorials

Below is a comprehensive set of examples and tutorials for the Shandu project, organized by complexity and use case. These examples leverage the project's structure, including the `scraper`, `search`, `agents`, and `utils` modules.

---

## Getting Started Tutorial

###  What This Demonstrates
A beginner-friendly guide to install, configure, and run the Shandu project using the CLI interface.

###  Step-by-Step Instructions
1. **Clone the repository** to your local machine.
2. **Install dependencies** using `setup.py` and `requirements.txt`.
3. **Run the CLI** to initialize a basic research workflow.

###  Code Example

# Step 1: Navigate to the workspace
cd /media/sc/data/sc/openwiki/output/shandu

# Step 2: Install the package in editable mode
pip install -e .

# Step 3: Run the CLI to initialize a researcher agent
python shandu/cli.py init --config shandu/config.py

###  Expected Output

Shandu Researcher initialized with default configuration.
Available models: Gemini, GPT-4, Mistral
Ready to execute queries.

---

## Basic Examples

### 2.1 Web Scraper Usage
####  What This Demonstrates
Using the `scraper.py` module to extract content from a Wikipedia page.

####  Code Example

# File: examples/basic_scraper.py
from shandu.scraper.scraper import Scraper

# Initialize the scraper
scraper = Scraper()

# Scrape a Wikipedia page
content = scraper.scrape("https://en.wikipedia.org/wiki/Artificial_Intelligence")

# Print first 500 characters
print(content[:500])

####  Expected Output

Artificial intelligence (AI) is intelligence demonstrated by machines, in contrast to the natural intelligence displayed by humans and animals. Leading AI textbooks define the field as the study of "intelligent agents" that can perceive their environment and take actions that maximize their chances of achieving their goals. These agents can be programmed to learn from data, solve problems, and adapt to new inputs.

---

### 2.2 Basic Search Functionality
####  What This Demonstrates
Using the `search.py` module to perform a simple keyword-based search.

####  Code Example

# File: examples/basic_search.py
from shandu.search.search import Search

# Initialize the search module
searcher = Search()

# Execute a search query
results = searcher.query("history of quantum computing", max_results=3)

# Print results
for i, result in enumerate(results, 1):
    print(f"Result {i}:")
    print(f"Title: {result['title']}")
    print(f"Summary: {result['summary']}\n")

####  Expected Output

Result 1:
Title: Quantum Computing Milestones
Summary: A timeline of key developments in quantum computing from 1982 to 2023...

Result 2:
Title: Early Theoretical Foundations
Summary: Explains Feynman's 1982 proposal for quantum simulation...

Result 3:
Title: Modern Quantum Processors
Summary: Discusses IBM's 127-qubit processor and Google's quantum supremacy claims...

---

## Advanced Examples

### 3.1 Custom Agent Graph with Reflection
####  What This Demonstrates
Building a custom agent workflow using `langgraph_agent.py` and the `reflect.py` node for iterative improvement.

####  Code Example

# File: examples/advanced_reflection_agent.py
from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.nodes.reflect import ReflectionNode

# Create a custom agent with reflection
agent = LangGraphAgent(
    model="gemini",
    nodes=[
        "generate_queries",
        "search",
        "source_selection",
        ReflectionNode(max_iterations=3),  # Add reflection for 3 iterations
        "report_generation"
    ]
)

# Execute a complex research task
result = agent.run_research("Impact of AI on climate change mitigation", depth=2)
print(result["final_report"])

####  Expected Output

[Reflection Iteration 1] Identified gaps in energy efficiency data.
[Reflection Iteration 2] Added 3 new sources on AI-driven carbon capture.
[Reflection Iteration 3] Synthesized findings into a structured report.
Final Report: AI technologies can optimize renewable energy grids, reduce emissions in manufacturing, and enhance climate modeling accuracy...

---

### 3.2 Multi-Model Integration
####  What This Demonstrates
Switching between different LLMs (Gemini and Mistral) using the `config.py` and `agent_utils.py`.

####  Code Example

# File: examples/multi_model_integration.py
from shandu.agents.agent import ResearchAgent
from shandu.config import load_config

# Load configuration with model switching
config = load_config("gemini")  # Could also be "mistral"
agent = ResearchAgent(config)

# Execute a query using the selected model
response = agent.answer("Compare transformer and RNN architectures")
print(f"Model Used: {config.model_name}")
print(f"Answer: {response}")

####  Expected Output

Model Used: gemini
Answer: Transformers use self-attention mechanisms for parallel processing, while RNNs rely on sequential data handling...

---

## Common Integration Scenarios

### 4.1 Citation Management Integration
####  What This Demonstrates
Using `citation_manager.py` and `citation_registry.py` to track sources in a research report.

####  Code Example

# File: examples/citation_integration.py
from shandu.agents.utils.citation_manager import CitationManager
from shandu.agents.processors.content_processor import ContentProcessor

# Initialize citation manager
manager = CitationManager()

# Process content with citations
processor = ContentProcessor()
processed_content = processor.process_with_citations("AI in healthcare", manager)

# Export citations in APA format
print(manager.export_citations("apa"))

####  Expected Output

Processed content with 5 citations:
1. Smith et al. (2023) on AI diagnostics
2. Johnson & Lee (2022) about machine learning in drug discovery
...
APA Format:
Smith, J. (2023). AI Diagnostics...

---

## End-to-End Example: Building a Research Report

###  What This Demonstrates
Creating a full research report on "AI in Sustainable Agriculture" using the researcher agent and multiple processors.

###  Code Example

# File: examples/end_to_end_report.py
from shandu.research.researcher import Researcher
from shandu.agents.processors.report_generator import ReportGenerator

# Initialize researcher with full workflow
researcher = Researcher(
    model="o3-mini-high",
    max_depth=3,
    use_citations=True,
    include_reflection=True
)

# Execute research and generate report
research_result = researcher.research("AI applications in sustainable agriculture")

# Save and print final report
ReportGenerator.save_report(research_result, "ai_sustainable_agriculture_report.md")
print("Generated report saved to ai_sustainable_agriculture_report.md")

###  Expected Output

Generated report saved to ai_sustainable_agriculture_report.md
File contents:
# AI in Sustainable Agriculture
## Introduction
AI optimizes crop yields while reducing water usage (Source: FAO 2023)...
## Key Applications
1. Precision farming using computer vision (Source: Nature 2022)
2. Predictive analytics for soil health (Source: IEEE 2021)
...
## Conclusion
AI can reduce agricultural emissions by 20% by 2030 (Source: IPCC 2023)

---

##  Project Structure References
- **CLI Interface**: `shandu/cli.py`
- **Core Search Logic**: `shandu/search/ai_search.py`
- **Agent Workflows**: `shandu/agents/langgraph_agent.py`
- **Citation Tools**: `shandu/agents/utils/citation_manager.py`
- **Example Templates**: `examples/gemini.md`, `examples/mistral_large.md`

These examples demonstrate Shandu's capabilities in research automation, multi-model support, and citation management. For production use, ensure you configure API keys in `config.py` and review the `LICENSE` file for model-specific restrictions.</div>
                
                
                <div class="space-y-6">
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateless Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>config = {
    "model_name": "gemini-flash2.5",
    "graph_config": {"max_depth": 5, "timeout": 30},
    "tool_registry": {
        "search": ai_search.GoogleSearch(),
        "citation": citation_manager.CitationManager()
    }
}</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateless Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.nodes.generate_queries import QueryGenerator

agent = LangGraphAgent(graph_builder=QueryGenerator())
queries = agent.process_input(topic="Climate Change")
print(queries)  # Outputs: ["What are the main causes of climate change?", ...]</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateless Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes import InitializeNode, SourceSelector, ReportGenerator

builder = GraphBuilder()
builder.add_node(InitializeNode())
builder.add_node(SourceSelector(), dependencies=["InitializeNode"])
builder.add_node(ReportGenerator(), dependencies=["SourceSelector"])

agent = LangGraphAgent(graph_builder=builder)
report = agent.process_input(research_query="AI ethics in healthcare")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateless Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.nodes.search import SearchNode
from shandu.search.ai_search import CustomSearchTool

agent = LangGraphAgent(graph_builder=SearchNode(), tool_registry={"search": CustomSearchTool()})
results = agent.process_input(query="Quantum computing applications")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateful Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.initialize import ResearchState

state = ResearchState(initial_query="Quantum computing", max_sources=5)
print(state.sources)  # []
print(state.queries)  # ["Quantum computing"]</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateful Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.processors.content_processor import ContentProcessor
from shandu.agents.nodes.initialize import ResearchState

state = ResearchState(initial_query="Climate change")
processor = ContentProcessor()
processor.process(state)  # Adds processed content to state.content</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateful Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>state.persist_state("/path/to/save/state.pkl")
# Later...
resumed_state = ResearchState.load_state("/path/to/save/state.pkl")
print(resumed_state.content)  # Retrieves previously processed content</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Stateful Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>class CustomResearchState(ResearchState):
    def __init__(self, **kwargs):
        super().__init__(**kwargs)
        self._state["custom_field"] = []

state = CustomResearchState(initial_query="AI safety", custom_field=["preloaded"])</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Project Infrastructure** Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Project Infrastructure** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># In a module like shandu/agents/processors/content_processor.py
from shandu.utils.logger import get_logger
logger = get_logger(__name__)

def process_content(data):
    logger.info("Processing content with %s", Config.LLM_MODEL)
    # Processing logic...</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Project Infrastructure** Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Project Infrastructure** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Run a search with custom parameters
shandu search "AI ethics" --model gemini-flash2.5 --results 15</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Project Infrastructure** Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Project Infrastructure** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Build and install the package
python setup.py sdist bdist_wheel
pip install dist/shandu-0.1.0.tar.gz</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Project Infrastructure** Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Project Infrastructure** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Set environment variables before running
export SHANDU_LOG_LEVEL=INFO
export LLM_API_KEY="your_api_key_here"
python -m shandu generate-report</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Data Acquisition Layer** Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Data Acquisition Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Scenario 1: Scraping a static HTML page  
data = scraper.fetch("https://example-news-site.com", parser="beautifulsoup")  

# Scenario 2: Using a custom parser for a specific site  
from shandu.scraper import CustomParser  
scraper = Scraper(parser_class=CustomParser)  
data = scraper.fetch("https://custom-site.com")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Data Acquisition Layer** Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Data Acquisition Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.scraper import Scraper  
scraper = Scraper()  
result = scraper.fetch("https://example.com", timeout=15)  
print(result["title"])  # Extracted page title</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Data Acquisition Layer** Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Data Acquisition Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.scraper import Scraper, HTMLParser  

class MyCustomParser(HTMLParser):  
    def extract_content(self, html):  
        # Custom logic to extract data  
        return {"custom_field": "value"}  

scraper = Scraper(parser_class=MyCustomParser)  
data = scraper.fetch("https://custom-site.com")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Data Acquisition Layer** Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Data Acquisition Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>import asyncio  
from shandu.scraper import AsyncScraper  

async def main():  
    scraper = AsyncScraper()  
    urls = ["https://site1.com", "https://site2.com"]  
    results = await scraper.fetch_all(urls, max_concurrency=5)  
    for result in results:  
        print(result["content"])  

asyncio.run(main())</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Agent System Layer** Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Agent System Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes import Node
from shandu.agents.graph.builder import GraphBuilder

class CustomQueryNode(Node):
    def execute(self, state):
        # Custom logic to generate search queries
        state["queries"].append("renewable energy 2024 trends")
        return state

builder = GraphBuilder()
builder.add_node("custom_query", CustomQueryNode())
agent = builder.build_agent()
agent.run("Custom query test")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Agent System Layer** Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Agent System Layer** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.utils.citation_manager import CitationManager

manager = CitationManager(style="MLA")
sources = [{"title": "AI Ethics", "author": "Smith", "year": 2023}]
formatted_citations = manager.format_sources(sources)
print(formatted_citations)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Design Patterns and Techniques** Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Design Patterns and Techniques** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>AGENT_CONFIG = {
    "search_engine": "ai_search",
    "max_iterations": 3,
    "citation_style": "MLA",
    "parallel_processing": True
}</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Design Patterns and Techniques** Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Design Patterns and Techniques** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes import InitializeNode, SearchNode, ReportGenerationNode

builder = GraphBuilder()
builder.add_node(InitializeNode())
builder.add_node(SearchNode())
builder.add_node(ReportGenerationNode())
workflow = builder.build()
result = workflow.run({"query": "AI ethics"})</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Design Patterns and Techniques** Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Design Patterns and Techniques** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes import SourceSelectionNode, SearchNode
from shandu.agents.utils.citation_manager import CitationManager

cm = CitationManager(style="Chicago")
builder = GraphBuilder()
builder.add_node(SourceSelectionNode(citation_manager=cm))
builder.add_node(SearchNode(parallel=True))
workflow = builder.build()
workflow.run({"topic": "Quantum computing"})</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**Design Patterns and Techniques** Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example usage of the **Design Patterns and Techniques** component</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.generate_queries import RecursiveQueryExpander

expander = RecursiveQueryExpander(max_depth=3)
queries = expander.expand("Climate change")
# Output: ["Climate change", "Global warming impacts", "Renewable energy solutions"]</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>state = ResearchState(topic="Quantum Computing", max_depth=4)
  agent = LangGraphAgent(state=state)
  agent.start()</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>state.update_citations(researcher.fetch_sources())</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>if state.get_progress() >= 100:
      print("Research complete!")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.initialize import ResearchState
state = ResearchState(topic="AI Ethics", max_depth=2)
print(state.topic)  # Output: "AI Ethics"</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 5</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># In shandu/agents/nodes/search.py
def search_node(state):
    results = perform_search(state.topic)
    state.update_citations(results)
    return state</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">**State Analysis** Example 6</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.initialize import ResearchState
from shandu.agents.utils.agent_utils import StateValidator

class CustomValidator(StateValidator):
    def validate(self, state):
        assert len(state.citations) < 100, "Too many citations!"

state = ResearchState(topic="Neural Networks", max_depth=3, persist_interval=10)
state.set_validator(CustomValidator())</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Navigate to workspace
cd /media/sc/data/sc/openwiki/output/shandu

# Install dependencies
pip install -r requirements.txt</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Run a search using the default agent
python -m shandu.cli --config examples/gemini-flash2.5.md "What are the latest advancements in quantum computing?"

# Generate a report using a specific model
python -m shandu.cli --config examples/mistral_large.md --query "History of the Roman Empire" --output reports/roman_history.md</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Example configuration
DEFAULT_MODEL = "gemini-flash2.5"
MAX_SEARCH_RESULTS = 10
LOG_LEVEL = "INFO"</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Set API keys for models
export GEMINI_API_KEY="your-gemini-key"
export MISTRAL_API_KEY="your-mistral-key"</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 5</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.research.researcher import Researcher
from shandu.agents.langgraph_agent import LangGraphAgent

# Initialize agent with model from examples
agent = LangGraphAgent(model_config="examples/gpt4.0-mini.md")

# Create researcher and execute query
researcher = Researcher(agent=agent)
result = researcher.search("Explain the theory of relativity")
print(result.summary)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 6</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.processors.report_generator import ReportGenerator

# Generate structured report
generator = ReportGenerator(output_dir="reports")
report = generator.create_report(
    query="AI ethics frameworks",
    sources=["https://example.com/ai-ethics1", "https://example.com/ai-ethics2"],
    format="markdown"
)
print(f"Report saved to: {report.file_path}")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 7</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.utils.citation_manager import CitationManager

# Add and format citations
manager = CitationManager()
manager.add_source("https://example.com/quantum-paper", "Quantum Computing Journal", 2023)
manager.add_source("https://example.com/ai-framework", "AI Ethics Institute", 2022)

formatted_citations = manager.format_citations(style="APA")
print(formatted_citations)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 8</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.graph.builder import GraphBuilder
from shandu.agents.nodes import generate_queries, source_selection, report_generation

# Build custom research graph
builder = GraphBuilder()
builder.add_node("query_gen", generate_queries.generate_research_queries)
builder.add_node("select_sources", source_selection.select_top_sources)
builder.add_node("gen_report", report_generation.generate_full_report)

# Connect nodes with specific parameters
builder.connect("query_gen", "select_sources", max_sources=5)
builder.connect("select_sources", "gen_report", citation_style="MLA")

# Execute workflow
workflow = builder.build()
result = workflow.run("What caused the fall of the Roman Empire?")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 9</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.agent import BaseAgent
from shandu.agents.langgraph_agent import LangGraphAgent

# Initialize agents with different models
agent1 = LangGraphAgent(model_config="examples/gemini.md")
agent2 = BaseAgent(model="o3-mini-high", config_path="examples/o3-mini-high.md")

# Chain agents for complex tasks
from shandu.agents.utils.agent_utils import chain_agents
chained_agent = chain_agents([agent1, agent2])

result = chained_agent.execute("Compare machine learning approaches in medical diagnosis")
print(result.final_answer)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 10</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.utils.logger import setup_cache
   setup_cache(cache_dir="cache", max_size=100)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 11</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.search import parallel_search
   results = parallel_search(queries=["AI ethics", "Quantum computing"], max_workers=4)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 12</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.utils.logger import get_logger
   logger = get_logger(__name__)
   logger.info("Starting research workflow", extra={"query": "AI ethics"})</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 13</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.research.researcher import Researcher
researcher = Researcher(model="gpt4.0-mini", search_depth=3)
result = researcher.expanded_search("CRISPR gene editing breakthroughs")
result.save_to_file("crispr_research.md", citations=True)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 14</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes.source_selection import select_technical_sources
sources = select_technical_sources(
    query="Python async programming",
    source_types=["github", "developer_portal"],
    max_sources=3
)
print([s.url for s in sources])</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 15</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.graph.wrapper import GraphWrapper

# Initialize with pre-defined graph
pipeline = GraphWrapper(graph_config="examples/advanced_pipeline.md")

# Execute with reflection node
result = pipeline.run("Evaluate renewable energy storage solutions", enable_reflection=True)
print(result.reflection_summary)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Usage Example 16</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code>from shandu.agents.nodes import NodeBase
from shandu.agents.graph.builder import GraphBuilder

class DataValidator(NodeBase):
    def process(self, data):
        return {"validated_data": data, "valid": True}

builder = GraphBuilder()
builder.add_node("validator", DataValidator())
workflow = builder.build()
result = workflow.run("Validate climate change data", nodes=["validator"])</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 1</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Example: Asynchronous scraping with aiohttp
import aiohttp
import asyncio

async def fetch(session, url):
    async with session.get(url) as response:
        return await response.text()

async def main(urls):
    async with aiohttp.ClientSession() as session:
        results = await asyncio.gather(*[fetch(session, url) for url in urls])
        return results

# Run with: asyncio.run(main(urls))</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 2</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Example: Custom processor in shandu/agents/processors/
from shandu.agents.base_processor import BaseProcessor

class CustomProcessor(BaseProcessor):
    def process(self, content: str, config: dict) -> str:
        # Implement custom processing logic
        return self._apply_transformations(content, config.get("custom_rules", []))</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 3</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Example: Custom configuration parameters
CUSTOM_PROCESSOR_PARAMS = {
    "max_depth": 5,
    "timeout": 30,
    "retry_attempts": 3
}</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 4</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># In shandu/agents/agent.py
class ExternalAPIClient:
    def __init__(self, api_key: str):
        self.api_key = api_key
    
    def query(self, prompt: str) -> str:
        # Integration with external systems
        headers = {"Authorization": f"Bearer {self.api_key}"}
        # Implementation details...</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 5</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># In shandu/config.py
SCALING_CONFIG = {
    "max_concurrent_tasks": 100,
    "worker_pool_size": 10,
    "result_partitioning": "round_robin"
}</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title">Advanced Example 6</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Example from shandu/utils/logger.py
   def secure_log(message: str):
       sanitized = sanitize_input(message)  # Prevents log injection
       if contains_sensitive_data(message):
           return log_to_secure_db(message)
       return standard_logger(message)</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Code Example</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># Step 1: Navigate to the workspace
cd /media/sc/data/sc/openwiki/output/shandu

# Step 2: Install the package in editable mode
pip install -e .

# Step 3: Run the CLI to initialize a researcher agent
python shandu/cli.py init --config shandu/config.py</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Expected Output</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/basic_scraper.py
from shandu.scraper.scraper import Scraper

# Initialize the scraper
scraper = Scraper()

# Scrape a Wikipedia page
content = scraper.scrape("https://en.wikipedia.org/wiki/Artificial_Intelligence")

# Print first 500 characters
print(content[:500])</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Code Example</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/basic_search.py
from shandu.search.search import Search

# Initialize the search module
searcher = Search()

# Execute a search query
results = searcher.query("history of quantum computing", max_results=3)

# Print results
for i, result in enumerate(results, 1):
    print(f"Result {i}:")
    print(f"Title: {result['title']}")
    print(f"Summary: {result['summary']}\n")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Expected Output</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/advanced_reflection_agent.py
from shandu.agents.langgraph_agent import LangGraphAgent
from shandu.agents.nodes.reflect import ReflectionNode

# Create a custom agent with reflection
agent = LangGraphAgent(
    model="gemini",
    nodes=[
        "generate_queries",
        "search",
        "source_selection",
        ReflectionNode(max_iterations=3),  # Add reflection for 3 iterations
        "report_generation"
    ]
)

# Execute a complex research task
result = agent.run_research("Impact of AI on climate change mitigation", depth=2)
print(result["final_report"])</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Code Example</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/multi_model_integration.py
from shandu.agents.agent import ResearchAgent
from shandu.config import load_config

# Load configuration with model switching
config = load_config("gemini")  # Could also be "mistral"
agent = ResearchAgent(config)

# Execute a query using the selected model
response = agent.answer("Compare transformer and RNN architectures")
print(f"Model Used: {config.model_name}")
print(f"Answer: {response}")</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Expected Output</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/citation_integration.py
from shandu.agents.utils.citation_manager import CitationManager
from shandu.agents.processors.content_processor import ContentProcessor

# Initialize citation manager
manager = CitationManager()

# Process content with citations
processor = ContentProcessor()
processed_content = processor.process_with_citations("AI in healthcare", manager)

# Export citations in APA format
print(manager.export_citations("apa"))</code></pre>
                            </div>
                        </div>
                    </div>
                
                    <div class="example-card">
                        <div class="example-header">
                            <h3 class="example-title"> Code Example</h3>
                        </div>
                        <div class="example-body">
                            <div class="example-description">Example demonstrating key functionality of the shandu library.</div>
                            <div class="code-block-container">
                                <div class="code-block-title">
                                    <span>example.py</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code># File: examples/end_to_end_report.py
from shandu.research.researcher import Researcher
from shandu.agents.processors.report_generator import ReportGenerator

# Initialize researcher with full workflow
researcher = Researcher(
    model="o3-mini-high",
    max_depth=3,
    use_citations=True,
    include_reflection=True
)

# Execute research and generate report
research_result = researcher.research("AI applications in sustainable agriculture")

# Save and print final report
ReportGenerator.save_report(research_result, "ai_sustainable_agriculture_report.md")
print("Generated report saved to ai_sustainable_agriculture_report.md")</code></pre>
                            </div>
                        </div>
                    </div>
                
                </div>
                
            </div>
            

            <div class="text-center text-text-secondary text-xs border-t border-border pt-4 mt-8">
                Documentation generated at 2025-05-22 15:42:54
                
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: true,
                theme: 'default',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true,
                    curve: 'basis'
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65,
                    boxMargin: 10,
                    boxTextMargin: 5,
                    noteMargin: 10,
                    messageMargin: 35,
                    mirrorActors: true,
                    bottomMarginAdj: 1,
                    useMaxWidth: true,
                    rightAngles: false,
                    showSequenceNumbers: false
                },
                themeVariables: {
                    primaryColor: '#FFCB45',
                    primaryTextColor: '#333',
                    primaryBorderColor: '#FFCB45',
                    lineColor: '#666',
                    secondaryColor: '#fafafa',
                    tertiaryColor: '#f4f4f4'
                }
            });
            
            const markdownElements = document.querySelectorAll('.markdown-content');
            markdownElements.forEach(element => {
                const content = element.innerHTML;
                if (content.trim()) {
                    try {
                        element.innerHTML = marked.parse(content);
                        
                        element.querySelectorAll('h1, h2, h3, h4, h5, h6').forEach(heading => {
                            heading.textContent = heading.textContent.replace(/^\d+[\.\)\-]\s+/, '');
                        });
                    } catch (e) {
                        console.error('Error parsing markdown:', e);
                    }
                }
            });
            
            function detectCodeLanguage(code) {
                if (code.includes('import ') || code.includes('def ') || code.includes('class ') && code.includes(':')) {
                    return 'python';
                } else if (code.includes('function') || code.includes('const ') || code.includes('let ') || code.includes('=>')) {
                    return 'javascript';
                } else if (code.trim().startsWith('{') || code.trim().startsWith('[')) {
                    return 'json';
                } else if (code.includes('#!/bin/') || code.includes('$ ') || code.includes('pip install') || code.includes('git clone')) {
                    return 'bash';
                }
                return 'plaintext';
            }
            
            function unifyCodeBlocks() {
                document.querySelectorAll('pre code').forEach(codeElement => {
                    const preElement = codeElement.parentElement;
                    
                    if (preElement.parentElement.classList.contains('code-block-container')) {
                        return;
                    }
                    
                    if (preElement.parentElement.classList.contains('mermaid')) {
                        return;
                    }
                    
                    let language = 'plaintext';
                    const classes = Array.from(codeElement.classList);
                    const langClass = classes.find(cls => cls.startsWith('language-'));
                    
                    if (langClass) {
                        language = langClass.replace('language-', '');
                    } else {
                        language = detectCodeLanguage(codeElement.textContent);
                        codeElement.classList.add(`language-${language}`);
                    }
                    
                    let fileName = language === 'python' ? 'example.py' : 
                                  language === 'javascript' ? 'example.js' : 
                                  language === 'bash' ? 'terminal' : 
                                  language === 'json' ? 'data.json' :
                                  'example.txt';
                    
                    const container = document.createElement('div');
                    container.className = 'code-block-container';
                    
                    const titleBar = document.createElement('div');
                    titleBar.className = 'code-block-title';
                    
                    const fileNameSpan = document.createElement('span');
                    fileNameSpan.textContent = fileName;
                    titleBar.appendChild(fileNameSpan);
                    
                    const copyButton = document.createElement('button');
                    copyButton.className = 'copy-button';
                    copyButton.textContent = 'Copy';
                    copyButton.setAttribute('onclick', 'copyCode(this)');
                    titleBar.appendChild(copyButton);
                    
                    const parent = preElement.parentElement;
                    parent.insertBefore(container, preElement);
                    container.appendChild(titleBar);
                    container.appendChild(preElement);
                    
                    hljs.highlightBlock(codeElement);
                });
            }
            
            setTimeout(unifyCodeBlocks, 500);
            
            window.copyCode = function(button) {
                const pre = button.closest('.code-block-container').querySelector('pre');
                const code = pre.textContent;
                
                navigator.clipboard.writeText(code).then(() => {
                    const originalText = button.textContent;
                    button.textContent = 'Copied!';
                    button.style.backgroundColor = '#10b981';
                    button.style.color = 'white';
                    
                    setTimeout(() => {
                        button.textContent = originalText;
                        button.style.backgroundColor = '';
                        button.style.color = '';
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                    button.textContent = 'Failed!';
                    button.style.backgroundColor = '#ef4444';
                    button.style.color = 'white';
                    
                    setTimeout(() => {
                        button.textContent = 'Copy';
                        button.style.backgroundColor = '';
                        button.style.color = '';
                    }, 2000);
                });
            }
            
            document.querySelectorAll('.collapsible').forEach(collapsible => {
                collapsible.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main > div[id]');
            
            function highlightActiveLink() {
                let currentSection = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.offsetHeight;
                    
                    if (window.scrollY >= sectionTop && window.scrollY < sectionTop + sectionHeight) {
                        currentSection = section.getAttribute('id');
                    }
                });
                
                navLinks.forEach(link => {
                    link.classList.remove('bg-sidebar-active', 'text-text-heading', 'font-medium');
                    
                    const href = link.getAttribute('href').substring(1);
                    if (href === currentSection) {
                        link.classList.add('bg-sidebar-active', 'text-text-heading', 'font-medium');
                    }
                    
                    if (link.classList.contains('text-xs') && 
                        link.getAttribute('href').includes(currentSection + '-')) {
                        link.classList.add('text-text-heading', 'font-medium');
                    }
                });
            }
            
            window.addEventListener('scroll', highlightActiveLink);
            highlightActiveLink();
        });
    </script>
</body>
</html> 